<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="/start_script.py" timestamp="1531757919707">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/Desktop/fileload V1.1/fileload.py" timestamp="1532636809840">
        <mark key="a" line="838" column="20" />
        <mark key="[" line="328" column="20" />
        <mark key="]" line="328" column="20" />
        <mark key="." line="328" column="20" />
        <mark key="^" line="783" column="94" />
      </file>
      <file name="/Dummy.txt" timestamp="1533142586648">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="0" />
        <mark key="." line="0" column="0" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/untitled3/remotefindssh.sh" timestamp="1531864498787">
        <mark key="]" line="5" column="0" />
        <mark key="^" line="5" column="0" />
        <mark key="." line="5" column="0" />
      </file>
      <file name="/a.dummy" timestamp="1532381392073">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/flipframework/remotessh.sh.txt" timestamp="1531432841225">
        <mark key="[" line="19" column="19" />
      </file>
      <file name="$APPLICATION_CONFIG_DIR$/scratches/scratch.sh" timestamp="1532960827059">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="0" />
        <mark key="." line="0" column="0" />
      </file>
      <file name="$USER_HOME$/Desktop/git clone/fileload.py" timestamp="1531757013292">
        <mark key="[" line="533" column="60" />
        <mark key="]" line="527" column="11" />
        <mark key="." line="527" column="11" />
        <mark key="^" line="527" column="11" />
      </file>
      <file name="$USER_HOME$/Desktop/Fileload/framework/fileload.py" timestamp="1531759962651">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="0" />
        <mark key="." line="0" column="0" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/fileload_v1.0/python/fileload.py" timestamp="1533142410628">
        <mark key="[" line="301" column="21" />
        <mark key="]" line="801" column="53" />
        <mark key="." line="801" column="53" />
        <mark key="^" line="811" column="67" />
      </file>
    </filemarks>
    <jumps />
    <registers>
      <register name="1" type="4">
        <text encoding="base64">JycnCkNyZWF0ZWQgb24gRmViIDE2LCAyMDE3CgpAYXV0aG9yOiBkbmFnaXJlZGR5Z2FyaQpAdmVyc2lvbjogMS4wCicnJwppbXBvcnQgb3Msc3lzCmltcG9ydCBqc29uCmltcG9ydCBwc3ljb3BnMgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGRhdGV0aW1lLHRpbWUKaW1wb3J0IGNvbW1hbmRzCmltcG9ydCBsb2dnaW5nCmltcG9ydCBzbXRwbGliCmltcG9ydCBiYXNlNjQKaW1wb3J0IHN1YnByb2Nlc3MKZnJvbSBlbWFpbC5taW1lLm11bHRpcGFydCBpbXBvcnQgTUlNRU11bHRpcGFydApmcm9tIGVtYWlsLm1pbWUuYXBwbGljYXRpb24gaW1wb3J0IE1JTUVBcHBsaWNhdGlvbgpmcm9tIGVtYWlsLk1JTUVCYXNlIGltcG9ydCBNSU1FQmFzZQpmcm9tIGVtYWlsLm1pbWUudGV4dCBpbXBvcnQgTUlNRVRleHQKZnJvbSBlbWFpbCBpbXBvcnQgRW5jb2RlcnMKaW1wb3J0IENvbmZpZ1BhcnNlcgppbXBvcnQgcmUKCmdfcHJvZF92YXI9J3Byb2RfcGhhc2UnCmdfZnVuY192YXI9J3JlcG9ydGluZy5maWxlbG9hZCcKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICB2YWxpZGF0ZUVtYWlsIDogIFZhbGlkYXRlcyBhbGwgdGhlIGVtYWlsIGlkIGluIHRoZSBwcm9wZXJ0eSBmaWxlIHRvIGNoZWNrIHdoZXRoZXIgdGhleSBhcmUgYWN0aXZlLiAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgUmV0cnVucyBhIGxpc3Qgb2YgdmFsaWQgZW1haWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgICAgICAgICAgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAKIy8JICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKZGVmIHZhbGlkYXRlRW1haWwoU0VSVkVSLHZhbGlkTHN0KToKICAgIGhvc3Q9U0VSVkVSCiAgICBlbWFpbFByb3A9Jy9ob21lL3BoZGZ0cHVzZXIvJXMvcHJvamVjdC9jb25maWcvRW1haWwucHJvcGVydGllcycgJShnX3Byb2RfdmFyKQogICAgY29uZmlnID0gQ29uZmlnUGFyc2VyLlJhd0NvbmZpZ1BhcnNlcigpCiAgICBjb25maWcucmVhZChlbWFpbFByb3ApCiAgICBlbWFpbExzdD1jb25maWcuZ2V0KCdFbWFpbCBIZWFkZXInLCdlbWFpbC5pZCcpLnNwbGl0KCcsJykKICAgIHNlcnZlcj1zbXRwbGliLlNNVFAoKQogICAgc2VydmVyLnNldF9kZWJ1Z2xldmVsKDApCiAgICBzZXJ2ZXIuY29ubmVjdChob3N0KQogICAgc2VydmVyLmhlbG8oaG9zdCkKICAgIGZvciBpIGluIGVtYWlsTHN0OgogICAgICAgIHNlcnZlci5tYWlsKGkpCiAgICAgICAgY29kZSxtc2c9c2VydmVyLnJjcHQoc3RyKGkpKQogICAgICAgIGlmIGNvZGU9PTI1MDoKICAgICAgICAgICAgdmFsaWRMc3QuYXBwZW5kKGkpCiAgICBzZXJ2ZXIucXVpdCgpCiAgICByZXR1cm4gdmFsaWRMc3QKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgc2VuZEVycm9tYWlsIDogIFNlbmRzIHRoZSBlbWFpbCB0byB0aGUgbGlzdCBvZiBhY3RpdmUgdXNlcnMgd2l0aCB0aGUgRXJyb3IgYW5kIERlYnVnIGluZm9ybWF0aW9uLiAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLwkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgIFJldHJ1bnMgbm90aGluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgIAojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgCiMvCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiBzZW5kRXJyb21haWwoZXJySW5mbyxqb2IscHJvY2Vzcyk6CiAgICBwcmludCAnRW1haWwgU3RhcnRlZCcKICAgIHRvZGF5ID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuZGF0ZSgpCiAgICBTRVJWRVIgPSAibWFpbGhvc3Qud2FkZGVsbC5jb20iCiAgICBCT0RZPWVyckluZm8KICAgIGFkZHJlc3NfYm9vaz1bXQogICAgU1VCSkVDVD0nJwogICAgaWYgcHJvY2VzcyA9PSAnJzoKICAgIAlTVUJKRUNUPSdUYXNrZWQgRmFpbGVkIC0tICVzIGluIFBST0QgZm9yIHByb2Nlc3Mgb24gJXMnJShqb2Isc3RyKHRvZGF5KSkKICAgIGVsc2U6CglTVUJKRUNUPSdUYXNrZWQgRmFpbGVkIC0tICVzIGluIFBST0QgQCAlcyBvbiAlcyclKGpvYixwcm9jZXNzLHN0cih0b2RheSkpCiAgICBhZGRyZXNzX2Jvb2s9dmFsaWRhdGVFbWFpbChTRVJWRVIsYWRkcmVzc19ib29rKQogICAgRlJPTSA9ICJIREZTU3VwcG9ydFRlYW1Ad2FkZGVsbC5jb20iCiAgICBUTyA9ICcsJy5qb2luKGFkZHJlc3NfYm9vaykKICAgIG1zZyA9IE1JTUVNdWx0aXBhcnQoKQogICAgbXNnWydTdWJqZWN0J109IFNVQkpFQ1QKICAgIG1zZ1snRnJvbSddPSBGUk9NICAgIAogICAgbXNnWydUbyddID0gVE8JCiAgICBtc2cucHJlYW1ibGUgPSAnTXVsdGlwYXJ0IG1hc3NhZ2UuXG4nCiAgICBtc2cuYXR0YWNoKE1JTUVUZXh0KEJPRFksJ3BsYWluJykpICAgIAogICAgdHJ5OgoJc2VydmVyID0gc210cGxpYi5TTVRQKFNFUlZFUikKICAgIAlzZXJ2ZXIuc2VuZG1haWwoRlJPTSxhZGRyZXNzX2Jvb2ssbXNnLmFzX3N0cmluZygpKQoJcHJpbnQgJ01lc3NhZ2UgU2VudCcKICAgIGV4Y2VwdCBTTVRQRVhDRVBUSU9OOgoJcHJpbnQgIkVycm9yOiB1bmFibGUgdG8gc2VuZCBFcnJvciBlbWFpbCB3aXRoIGF0dGFjaG1lbnQiCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgIGdldENvbm4gOiBmZXRjaCB0aGUgcHJvcGVydHkgaW5mb3JtYXRpb24gZnJvbSB0aGUgY29uZmlndXJhdGlvbiBmaWxlIGFuZCByZXR1cm5zIC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8JUmV0cnVucyBob3N0LGRhdGFiYXNlLGhhZG9vcCBlbnZpcm9ubWVudCBsb2NhdGlvbiBhbmQgbmV0d29yayBkcml2ZSBlbnZpcm9ubWVudCBsb2NhdGlvbnMuICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiBnZXRDb25uKCk6CiAgICBjb25uUHJvcD0nL2hvbWUvcGhkZnRwdXNlci8lcy9wcm9qZWN0L2NvbmZpZy9ob3N0LnByb3BlcnRpZXMnJShnX3Byb2RfdmFyKQogICAgY29uZmlnID0gQ29uZmlnUGFyc2VyLlJhd0NvbmZpZ1BhcnNlcigpCiAgICBjb25maWcucmVhZChjb25uUHJvcCkKICAgIGNvbm5Mc3Q9Y29uZmlnLmdldCgnSG9zdCBQcm9wZXJ0eScsJ0hvc3QuaWQnKS5zcGxpdCgnLCcpCiAgICBjb25uTHN0PScsJy5qb2luKGNvbm5Mc3QpCiAgICByZXR1cm4gY29ubkxzdC5zcGxpdCgnLCcpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgcmVhZExheW91dCA6IFJlYWRzIHRoZSBqc29uIGxheW91dCBmb3IgZWFjaCBrZXkgYW5kIHJldHVybnMgdGhlIGtleXMgYW5kIHZhbHVlIGZvciB0aGUgZmxhZ3MuICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLwlSZXRydW5zIGtleXMgYW5kIHZhbHVlIGZvciB0aGUgZmxhZ3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgc2VxdWVuY2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlX2V4dCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgIHNlcV9pZGVudF9jaGFyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgIAojLyAgICAgICAgICAgICAgICAgICBzZWNfY29sX0ZsYWcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgCiMvCSAgICAgICAgICAgICByZWNvcmRfZmxhZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCgpkZWYgcmVhZExheW91dChsb2FkKToKICAgIHJlY29yZEZsdXNoID0gJycKICAgIHJlY29yZFNlcSA9IFtdCiAgICBmb2xsd19SY2RfQ2hhcnM9JycKICAgIHJlY29yZFNlcV9leHQgPSAnJwogICAgc2VjX29yZD0nJwogICAgZm9yIGtleSx2YWx1ZSBpbiBsb2FkLml0ZW1zKCk6CiAgICAgICAgZm9yIHYgaW4gdmFsdWU6CiAgICAgICAgICAgIGlmICJyZWNvcmRfZmxhZyIgaW4gdi5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiB2WyJyZWNvcmRfZmxhZyJdID09ICdUcnVlJyBhbmQgInNlY19jb2xfRmxhZyIgbm90IGluIHYua2V5cygpOgogICAgICAgICAgICAgICAgICAgIHJlY29yZEZsdXNoPWtleQogICAgICAgICAgICAgICAgaWYgInNlY19jb2xfRmxhZyIgaW4gdi5rZXlzKCkgYW5kIHZbInJlY29yZF9mbGFnIl0gPT0gJ1RydWUnOgogICAgICAgICAgICAgICAgICAgIHNlY19vcmQ9a2V5ICAgCiAgICAgICAgICAgIGlmICJzZXF1ZW5jZSIgaW4gdi5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiB2WyJzZXF1ZW5jZSJdID09ICdUcnVlJzoKICAgICAgICAgICAgICAgICAgICByZWNvcmRTZXEuYXBwZW5kKGtleSkKICAgICAgICAgICAgaWYgInNlcXVlbmNlX2V4dCIgaW4gdi5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiB2WyJzZXF1ZW5jZV9leHQiXSA9PSAnVHJ1ZSc6CiAgICAgICAgICAgICAgICAgICAgcmVjb3JkU2VxX2V4dD1rZXkKICAgICAgICAgICAgICAgICAgICBmb2xsd19SY2RfQ2hhcnM9dlsic2VxX2lkZW50X2NoYXIiXQogICAgcmV0dXJuIHJlY29yZEZsdXNoLHJlY29yZFNlcSxyZWNvcmRTZXFfZXh0LHNlY19vcmQsZm9sbHdfUmNkX0NoYXJzCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgcG9wdWxhdGVOdWxscyA6ICBwb3B1bGF0ZXMgbnVsbHMgZm9yIHRoZSByZWNvcmQgdGhhdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBpbnB1dCBmaWxlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgIFJldHVybnMgICBwaXBlIGRlbGltaXRlZCBudWxsIHN0cmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgpkZWYgcG9wdWxhdGVOdWxscyhpdGVtLGpzb25fbG9hZCk6CiAgICByZXMgPSAnJwogICAgZm9yIGkgaW4gcmFuZ2UgKDEsbGVuKGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJjb2x1bW5zIl1bMF1baXRlbV0uc3BsaXQoJ3wnKSkrMSk6CiAgICAgICAgcmVzID0gcmVzICsgJ251bGx8JwogICAgcmV0dXJuIHJlcwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgIG1vdmVUb0hERlMgOiAgY29waWVzIHRoZSBwcm9jZXNzZWQgZmlsZSBmcm9tIHRoZSBuZXR3b3JrIHdpcCBkcml2ZSB0byBIREZTLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICBSZXR1cm5zICAgTm9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKZGVmIG1vdmVUb0hERlMocHJvZ0pvYlBhdGgsam9iTmFtZSx0YWJsZSxnX2hkcF9sb2MsbndfRHJpdmUpOgogICAgcHJpbnQgJ2VuZCB0aW1lJytzdHIoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpCiAgICBmbGVFeHN0PSIvJXMvJXMvJXMudHh0IiUoZ19oZHBfbG9jLGpvYk5hbWUsdGFibGUpCiAgICBwcmludCBmbGVFeHN0CiAgICByZXM9cm1ySGRmcyhmbGVFeHN0KQogICAgcHJpbnQgcmVzCiAgICBmbGVfb3V0TG9jPSIvJXMvJXMvd2lwLyVzLnR4dCIlKG53X0RyaXZlLHByb2dKb2JQYXRoLHRhYmxlKQogICAgcHJpbnQgZmxlX291dExvYwogICAgZmxlVG9IZHA9IiVzIC8lcy8lcy8iJShmbGVfb3V0TG9jLGdfaGRwX2xvYyxqb2JOYW1lKQogICAgcHJpbnQgZmxlVG9IZHAKICAgIHB1dEhkZnMoZmxlVG9IZHApCiAgICBvcy5yZW1vdmUoZmxlX291dExvYykKCgpkZWYgdGVzdEhkZnMoYWJzUHRoKToKICAgIGZsZUV4c3Q9ImhhZG9vcCBmcyAtdGVzdCAtZSAlcyIlKGFic1B0aCkKICAgIHJldHVybiBzdWJwcm9jZXNzLmNhbGwoZmxlRXhzdCxzaGVsbCA9IFRydWUpCmRlZiBybXJIZGZzKGFic1B0aCk6CiAgICAjZmxlRXhzdD0iaGFkb29wIGZzIC10ZXN0IC1lICVzIiUoYWJzUHRoKQogICAgcnRybmNkPXRlc3RIZGZzKGFic1B0aCkKICAgIGlmIGludChydHJuY2QpPT0wOgogICAgCWhhZG9vcGZzam9iID0gImhhZG9vcCBmcyAtcm1yICVzIiAlIChhYnNQdGgpCiAgICAJb3Muc3lzdGVtKGhhZG9vcGZzam9iKQogICAgcmV0dXJuIHJ0cm5jZAoKZGVmIGNhdEhkZnMoYWJzUHRoKToKICAgIGhhZG9vcEZzSm9iID0gImhhZG9vcCBmcyAtY2F0ICVzIiAlIChhYnNQdGgpCiAgICByc2x0U3QgPSBjb21tYW5kcy5nZXRvdXRwdXQoaGFkb29wRnNKb2IpCiAgICByZXR1cm4gcnNsdFN0CgpkZWYgcHV0SGRmcyhhYnNQdGgpOgogICAgIGZsZVRvSGRwPSJoZGZzIGRmcyAtcHV0ICVzIiUoYWJzUHRoKQogICAgIG9zLnN5c3RlbShmbGVUb0hkcCkKCmRlZiBmbGVDaGVjayhhYnNQdGgscHJjRmxlLG1vZGUpOgogICAgaWYgbW9kZT09J3InOgogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGFic1B0aCk6CiAgICAgICAgICAgIHByaW50ICIlcyBGaWxlIEV4aXN0cywgbG9hZGluZyB0aGUgZmlsZSIlKHByY0ZsZSkKICAgICAgICAgICAgZmlsZV9zaXplID0gb3MucGF0aC5nZXRzaXplKGFic1B0aCkKICAgICAgICAgICAgcHJpbnQgJ0ZpbGUgU2l6ZSAlcyBieXRlcycgJWZpbGVfc2l6ZQogICAgICAgICAgICBmbGUyUmVhZD1vcGVuKGFic1B0aCxtb2RlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50ICJUaGUgJXMgeW91IGxvYWRlZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBsb2NhdGlvbiBwbGVhc2UgcmVjaGVjayB0aGUgbG9jYXRpb24iJShwcmNGbGUpCiAgICAgICAgICAgIGVyck1zZz0iVGhlICVzIHlvdSBsb2FkZWQgZG9lc24ndCBleGlzdCBpbiB0aGUgbG9jYXRpb24gcGxlYXNlIHJlY2hlY2sgdGhlIGxvY2F0aW9uIiAlKHByY0ZsZSkKICAgICAgICAgICAgZGVNc2c9IlBsZWFzZSBjaGVjayB0aGUgaWYgJXMgZXhpc3RzIGZvciB0aGUgcHJvY2VzcyBpbiB0aGUgbG9jYXRpb24gLS0gJXMiJShwcmNGbGUsYWJzUHRoKQogICAgICAgICAgICBmbmxTdHJnPWVyck1zZysnXG4nK2RlTXNnCiAgICAgICAgICAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCclcyBkb2VzbnQgZXhzaXN0JyUocHJjRmxlKSwnJykKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShhYnNQdGgpIGFuZCBtb2RlPT0nYSsnOgogICAgICAgICAgICAgICAgZmxlMlJlYWQ9b3BlbihhYnNQdGgsbW9kZSkKICAgICAgICAgICAgZWxpZiBvcy5wYXRoLmlzZmlsZShhYnNQdGgpIGFuZCBtb2RlPT0ndyc6CiAgICAgICAgICAgICAgICBvcy5yZW1vdmUoYWJzUHRoKQogICAgICAgICAgICAgICAgZmxlMlJlYWQ9b3BlbihhYnNQdGgsbW9kZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZsZTJSZWFkPW9wZW4oYWJzUHRoLCd3JykKICAgICAgICBleGNlcHQgSU9FcnJvciBhcyBlOgogICAgICAgICAgICBwcmludCAiY2Fubm90IG9wZW4gZmlsZSAoezB9KTogezF9Ii5mb3JtYXQoZS5lcnJubywgZS5zdHJlcnJvcikKICAgICAgICAgICAgZXJyTXNnPSJjYW5ub3Qgb3BlbiBmaWxlICh7MH0pOiB7MX0iLmZvcm1hdChlLmVycm5vLCBlLnN0cmVycm9yKQogICAgICAgICAgICBkZU1zZz0iUGxlYXNlIENoZWNrIHRoZSBmaWxlcGF0aDogJXMiICUoYWJzUHRoKQogICAgICAgICAgICBmbmxTdHJnPWVyck1zZysnXG4nK2RlTXNnCiAgICAgICAgICAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCclcyBkb2VzbnQgZXhzaXN0JyUocHJjRmxlKSwnJykKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgIHJldHVybiBmbGUyUmVhZAogICAgCgpkZWYgdG1lU3RtcENoZWNrKGZsZVN6ZUNoayx0c091dHB1dCxjdXJUU1RNcCx0YWJsZSk6CiAgICBpZiBmbGVTemVDaGs9PVRydWU6CiAgICAgICAgcHJpbnQgJ1RpbWUgbG9nIGlzIGVtcHR5JwogICAgZWxzZToKICAgICAgICBmb3IgZHRlIGluIHRzT3V0cHV0OgogICAgICAgICAgICBpZiBjdXJUU1RNcD09ZHRlLnN0cmlwKCk6CiAgICAgICAgICAgICAgIHByaW50ICdQcm9jZXNzICVzJyUodGFibGUpCiAgICAgICAgICAgICAgIHByaW50ICdUaGlzIGZpbGUgd2FzIGFscmVhZHkgcHJvY2Vzc2VkIGZvciB0aW1lc3RhbXAgaW4gbG9ncyAlcyxwcm9ncmFtIGV4aXRpbmcnJShjdXJUU1RNcCkKICAgICAgICAgICAgICAgZXJyTXNnPSJUaGlzIGZpbGUgd2FzIGFscmVhZHkgcHJvY2Vzc2VkIGZvciB0aW1lc3RhbXAgaW4gbG9ncyAtJXMscHJvZ3JhbSBleGl0aW5nIEAgJXMgIiAlKGN1clRTVE1wLHN0cihkYXRldGltZS5kYXRldGltZS5ub3coKSkpCgkgICAgICAgZGVNc2c9IlBsZWFzZSBjaGVjayB0aGUgaW5wdXQgZmlsZSBwYXNzZWQiICAKCSAgICAgICBmbmxTdHJnPWVyck1zZysnXG4nK2RlTXNnCgkgICAgICAgc2VuZEVycm9tYWlsKGZubFN0cmcsJ0lucHV0IEZpbGUgUGFyc2VkIEFscmVhZHknLHRhYmxlKQogICAgICAgICAgICAgICBzeXMuZXhpdCgxKQogICAgcmV0dXJuICdUaW1lc3RhbXAgQ2hlY2sgY29tcGxldGVkJwogICAgICAgICAKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICBmbHVzaE91dHB1dCA6ICBmbHVzaCBlYWNoIG9mIHRoZSByZWNvcmRzIGluIHRoZSBkaWN0aW9uYXJpZXNbZGljdCxzZXFEaWN0XSBpbnRvIG91dHB1dCBmaWxlLiAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgIE5vdGU6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFdoZW5ldmVyIHRoZXJlIGFyZSByZWNvcmRzIGluIHRoZSBzZXFEaWN0ICx3aGlsZSBsb29wIGV4ZWN1dGVzIHRpbGwgY250ciBpcyBsZXNzIHRoYW4gbGVuZ3RoIG9mIHNlcURpY3QuICAgICAgICAgIC8jCiMvICAgICAgICBUaGlzIG1ldGhvZCB3aWxsIGNhbGwgcG9wdWxhdGVOdWxscygpIG1ldGhvZCB0byBwb3B1bGF0ZSBudWxscyBmb3IgdGhlIGtleXMgdGhhdCBkb2Vzbid0IGV4aXN0IGluIGRpY3Rpb25hcmllcy4gICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFJldHVybnMgcmVzX2NudCBmb3IgdGhlIGNvdW50IGRlYnVnZ2luZyBwdXJwb3NlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKCgpkZWYgZmx1c2hPdXRwdXQoYXNfb2ZfZHQsYnVzX2ZsYWcsZGljdCxzZXFEaWN0LHNlcV9leHQscmVzX2NudCxqc29uX2xvYWQsc2VxLG9wLHByb2NfaWQsaW5zcnRfdHMsc2VjX29yZCxyZWNfaWQscmVjX2lkX2ZsKToKICAgIG91dHB1dCA9ICcnCiAgICBpZiBzZWNfb3JkIGluIGRpY3Qua2V5cygpOgogICAgCWNvbF9vcmRlcj1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsic2VjX2NvbF9vcmRlciJdCiAgICBlbHNlOgogICAgICAgIGNvbF9vcmRlcj1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsiY29sX29yZGVyIl0KICAgIGNudCxsZW50ID0xLDEKICAgIGlmIGJvb2woc2VxRGljdCk6CiAgICAJZm9yIGkgaW4gc2VxRGljdC5rZXlzKCk6CiAgICAgICAgICAgIGlmIGxlbnQ9PWludChpLnNwbGl0KCdfJylbMV0pOgogICAgICAgICAgICAgICBsZW50PWxlbnQKICAgICAgICAgICAgZWxpZiBsZW50PGludChpLnNwbGl0KCdfJylbMV0pOgogICAgICAgICAgICAgICBsZW50PWludChpLnNwbGl0KCdfJylbMV0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgIGxlbnQ9bGVudAogICAgd2hpbGUgVHJ1ZToKCW91dHB1dCA9ICcnCiAgICAgICAgaWYgY250ID4gbGVudDogCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZm9yIGNvbHMgaW4gY29sX29yZGVyOgoJICAgIGlmIGNvbHMgaW4gZGljdC5rZXlzKCkgOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgZGljdFtjb2xzXQogICAgICAgICAgICBlbGlmIGNvbHMgaW4gc2VxOgogICAgICAgICAgICAgICAgaWYgY29scysnXycrc3RyKGNudCkgaW4gc2VxRGljdC5rZXlzKCk6IAogICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgc2VxRGljdFtjb2xzKydfJytzdHIoY250KV0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBwb3B1bGF0ZU51bGxzKGNvbHMsanNvbl9sb2FkKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgcG9wdWxhdGVOdWxscyhjb2xzLGpzb25fbG9hZCkKICAgICAgICBjbnQgPSBjbnQrMQogICAgICAgIHJlY19pZD1yZWNfaWQrMQogICAgICAgIGlmIGJ1c19mbGFnPT0nVHJ1ZSc6CiAgICAgICAgICAgaWYgcmVjX2lkX2ZsPT0nVHJ1ZSc6CgkgICAgICBvdXRwdXQgPSBzdHIocmVjX2lkKSsnfCcrYXNfb2ZfZHQrJ3wnK291dHB1dCArIHByb2NfaWQgKyAnfCcgKyBpbnNydF90cyArJ1xuJwogICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgb3V0cHV0ID0gYXNfb2ZfZHQrJ3wnK291dHB1dCArIHByb2NfaWQgKyAnfCcgKyBpbnNydF90cyArJ1xuJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgb3V0cHV0PW91dHB1dCArIHByb2NfaWQgKyAnfCcgKyBpbnNydF90cyArJ1xuJwogICAgICAgIG9wLndyaXRlKG91dHB1dCkKICAgICAgICByZXNfY250ID0gcmVzX2NudCArIDEKICAgIAogICAgcmV0dXJuIHJlc19jbnQscmVjX2lkCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgcGFyc2VMaW5lIDogVGhpcyBtZXRob2Qgd2lsbCB0YWtlIHRoZSBpbnB1dCBsaW5lIGFuZCBwYXJzZSB3aXRoIHJlc3BlY3RpdmUgdG8gdGhlIGpzb24gbGF5b3V0IC4gICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICBOb3RlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBUaGlzIG1ldGhvZCBpdGVyYXRlcyBvdmVyIHRoZSBjb2x1bW5zIHBlciBrZXkgaW4gdGhlIGpzb24gbGF5b3V0IGFuZCBwYXJzZXMgb3V0IHRoZSBwb3NpdGlvbnMgYW5kIGRhdGEgdHlwZSAgICAgICAvIwojLyAgICAgICAgb2YgZWFjaCBjb2x1bW4gYW5kIG9yZ2FuaXplIHRoZSBpbnB1dCBsaW5lIGludG8gcGlwZSBkZWxpbWl0ZWQgZm9ybWF0dGVkIHJvdy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgUmV0dXJucyBmb3JtYXR0ZWQgc3RyaW5nIG9mIHRoZSBpbnB1dCBsaW5lLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIHYuMDEgdXBkYXRlZCB0aGUgY29kZSB0byBoYW5kbGUgdGhlIGRpZmZlcmVudCBkYXRlIGZvcm1hdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIAoKICAgIApkZWYgcGFyc2VMaW5lKGl0ZW0sbGluZSxqc29uX2xvYWQpOgogICAgcmVzX3N0ID0gJycKICAgIHRyaW1fY2sgPSBGYWxzZQogICAgZmRfbm1fZmw9RmFsc2UKICAgIGRpZmZfbGVuZ3RoPTAKICAgIGV4cGVjdGVkX2xlbmd0aD1pbnQoanNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImxlbl9vZl9sbmUiXSkKICAgIGFjdHVhbF9sZW5ndGg9aW50KGxlbihsaW5lKSkKCiAgICBpZiBleHBlY3RlZF9sZW5ndGggPiBhY3R1YWxfbGVuZ3RoOgogICAgICAgIGRpZmZfbGVuZ3RoPWV4cGVjdGVkX2xlbmd0aC1hY3R1YWxfbGVuZ3RoCiAgICBlbHNlOgogICAgICAgIGRpZmZfbGVuZ3RoPWFjdHVhbF9sZW5ndGgtZXhwZWN0ZWRfbGVuZ3RoCiAgICBmb3IgdmFsIGluIGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJjb2x1bW5zIl1bMF1baXRlbV0uc3BsaXQoJ3wnKToKICAgICAgICBzdCA9ICcnCiAgICAgICAKCWlmIGxlbihqc29uX2xvYWRbaXRlbV1bMF1bImF0dHJpYiJdW3ZhbF1bMF0uc3BsaXQoJywnKSkgPiAzOgoJICAgIHN0YXJ0LGVuZCxkYXRhX3R5cGUsdCA9IGpzb25fbG9hZFtpdGVtXVswXVsiYXR0cmliIl1bdmFsXVswXS5zcGxpdCgnLCcpCgkgICAgaWYgdCA9PSAnc3RyaXAoKSc6CgkJdHJpbV9jayA9IFRydWUKCWVsc2U6ICAgICAgIAoJICAgIHN0YXJ0LGVuZCxkYXRhX3R5cGUgPSBqc29uX2xvYWRbaXRlbV1bMF1bImF0dHJpYiJdW3ZhbF1bMF0uc3BsaXQoJywnKQoKICAgICAgICBpZiBmZF9ubV9mbCA9PSAndHJ1ZSc6CiAgICAgICAgICAgIHN0YXJ0PXN0cihpbnQoc3RhcnQpK2RpZmZfbGVuZ3RoKQogICAgICAgICAgICBlbmQ9c3RyKGludChlbmQpK2RpZmZfbGVuZ3RoKQoKICAgICAgICBpZiBsZW4obGluZSkgIT0gZXhwZWN0ZWRfbGVuZ3RoIGFuZCBzdHIodmFsKT09J2Z1bmRfbm0nOgogICAgICAgICAgICBlbmQ9c3RyKGludChlbmQpK2RpZmZfbGVuZ3RoKQogICAgICAgICAgICBmZF9ubV9mbD0ndHJ1ZScKIAogICAgICAgIGxpbmU9cmUuc3ViKHInXHgwMCcsJyAnLGxpbmUpCgogICAgICAgIGlmIGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKSA9PSAnJzoKICAgICAgICAgICAgc3QgPSAnbnVsbCcKICAgICAgICBlbGlmIGRhdGFfdHlwZSBpbiAoJyVtJWQlWScsJyVZJW0lZCcsJyV5JW0lZCcsJyVZJWonLCclbSVkJXknLCclbS8lZC8lWScsJyVtLyVkLyV5Jyk6CiAgICAgICAgICAgIGR5bl9aZXJvX2Zscj0nMCcKICAgICAgICAgICAgZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKCiAgICAgICAgICAgIGlmIGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKSE9ZHluX1plcm9fZmxyLnpmaWxsKGxlbihsaW5lW2ludChzdGFydCk6aW50KGVuZCldLnN0cmlwKCkpKSBhbmQgbGluZVtpbnQoc3RhcnQpOmludChzdGFydCkrNF0uc3RyaXAoKSE9JzAwMDAnOiNkeW5fWmVyb19mbHIuemZpbGwoaW50KGVuZCktaW50KHN0YXJ0KSk6CiAgICAgICAgICAgICAgc3QgPSAgc3RyKGRhdGV0aW1lLnN0cnB0aW1lKGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0sZGF0YV90eXBlKS5kYXRlKCkpICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN0PSdudWxsJwogICAgICAgIGVsaWYgZGF0YV90eXBlID09ICdpbnQnOgogICAgICAgICAgICBpZiBsaW5lW2ludChzdGFydCk6aW50KGVuZCldLnN0cmlwKCkhPScnOgogICAgICAgICAgICAJc3QgPSBsaW5lW2ludChzdGFydCk6aW50KGVuZCldLnN0cmlwKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN0PSdudWxsJwogICAgICAgIGVsaWYgZGF0YV90eXBlLnN0YXJ0c3dpdGgoJ2RlY2ltYWwnKToKCiAgICAgICAgICAgIHByZSxzY2EgPSBkYXRhX3R5cGUuc3BsaXQoJygnKVsxXS5zcGxpdCgnfCcpCiAgICAgICAgICAgIHNjYSA9IGludChzY2EucmVwbGFjZSgnKScsJycpKQogICAgICAgICAgICBpZiBsZW4obGluZVtpbnQoc3RhcnQpOmludChlbmQpXSkgPCBpbnQocHJlKToKICAgICAgICAgICAgICAgIHN0PWxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uemZpbGwoaW50KHByZSkpCgogICAgICAgICAgICBzdCA9IGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKS1zY2FdICsnLicgK2xpbmVbaW50KGVuZCktc2NhOmludChlbmQpXQogICAgICAgICAgICAKICAgICAgICBlbGlmIGRhdGFfdHlwZSA9PSAnbnVsbCc6CiAgICAgICAgICAgIHN0PSdudWxsJwogICAgICAgIGVsaWYgZGF0YV90eXBlLnN0YXJ0c3dpdGgoJ1NkZWNpbWFsJyk6CiAgICAgICAgICAgIHByZSxzY2EgPSBkYXRhX3R5cGUuc3BsaXQoJygnKVsxXS5zcGxpdCgnfCcpCiAgICAgICAgICAgIHNjYSA9IGludChzY2EucmVwbGFjZSgnKScsJycpKQogICAgICAgICAgICBpbnRyX1Jlc2x0PWxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0KICAgICAgICAgICAgc3BjbF9DaHI9cmUuZmluZGFsbChyJ1teMC05Ol0nLGludHJfUmVzbHQpCiAgICAgICAgICAgIGZvciBjaHIgaW4gc3BjbF9DaHI6CiAgICAgICAgICAgICAgICBpbmR4PWludHJfUmVzbHQuaW5kZXgoY2hyKQogICAgICAgICAgICAgICAgY2hyX0NvbnY9Y2hyLmVuY29kZSgnY3AxMTQwJykuZW5jb2RlKCJoZXgiKQogICAgICAgICAgICAgICAgaWYgY2hyX0NvbnZbMDoxXT09J2MnOgogICAgICAgICAgICAgICAgICAgIGludHJfUmVzbHQ9aW50cl9SZXNsdC5yZXBsYWNlKGNocixjaHJfQ29udlstMV0pCiAgICAgICAgICAgICAgICAgICAgaW50cl9SZXNsdD0nKycraW50cl9SZXNsdFswOmludChwcmUpLXNjYV0rJy4nK2ludHJfUmVzbHRbaW50KHByZSktc2NhOl0KICAgICAgICAgICAgICAgIGVsaWYgY2hyX0NvbnZbMDoxXT09J2QnOgogICAgICAgICAgICAgICAgICAgIGludHJfUmVzbHQ9aW50cl9SZXNsdC5yZXBsYWNlKGNocixjaHJfQ29udlstMV0pCiAgICAgICAgICAgICAgICAgICAgaW50cl9SZXNsdD0nLScraW50cl9SZXNsdFswOmludChwcmUpLXNjYV0rJy4nK2ludHJfUmVzbHRbaW50KHByZSktc2NhOl0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaW50cl9SZXNsdD1pbnRyX1Jlc2x0LnJlcGxhY2UoY2hyLGNocl9Db252Wy0xXSkKICAgICAgICAgICAgICAgICAgICBpbnRyX1Jlc2x0PWludHJfUmVzbHRbMDppbnQocHJlKS1zY2FdKycuJytpbnRyX1Jlc2x0W2ludChwcmUpLXNjYTpdCiAgICAgICAgICAgIHN0ID0gaW50cl9SZXNsdAogICAgICAgICAgICAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzdCA9IGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKS5yZXBsYWNlKCd8JywnJykucmVwbGFjZSgnXFwnLCdcXFxcJykKCglpZiB0cmltX2NrOgoJICAgIGV4ZWMgInN0ID0gJyVzJy4lcyIgJShzdCx0KQoJICAgIHRyaW1fY2sgPSBGYWxzZQogICAgICAgIHJlc19zdCA9IHJlc19zdCArIHN0ICsnfCcgCiAgICByZXR1cm4gcmVzX3N0CgoKCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICBwcm9jZXNzIDogVGhpcyBtZXRob2QgaXMgdGhlIGRlY2lzaW9uIG1ha2VyIGFuZCBjb3JlIG9mIHRoaXMgcHJvZ3JhbSBpdCB3aWxsIGlkZW50aWZ5IHRoZSBsaW5lcyB0aGF0IG5lZWRzIHRvICAgICAgIC8jCiMvICAgICAgICAgICAgICAgIGJlIGlnbm9yZWQgYW5kIGZsdXNoIHRoZSByZXN1bHQgc2V0IHByb2Nlc3NlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgIE5vdGU6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFRoaXMgbWV0aG9kIGhhdmUgYWxsIHRoZSBkaWN0aW9hbnJpZXMgaW5pdGlhbGl6YXRpb24gdG8ga2VlcCB0aGUgcmVjb3JkIHNldCB0aGF0IG5lZWRzIHRvIGJlIGZsdXNoZWQgZXZlcnkgdGltZSAgIC8jCiMvICAgICAgICBpdCBzZWVzIHRoZSBmbHVzaCBpdGVtICh3aGljaCBtZWFuIHN0YXJ0IG9mIHRoZSByZWNvcmQgc2V0IFtDSUEsQ0lCLENJQ10sW0NJQSxDSUJdIHdoaWNoIGlzICJDSUEiIGluIHRoaXMgY2FzZSkuICAvIwojLyAgICAgICAgTGluZSMzNDMgOiBUaGlzIG1ldGhvZCBoYXMgdGhlIGxvZ2ljIHRvIGlkZW50aWZ5IHRoZSBzZXF1ZW5jZSBmbGFnIGVuYWJsZWQga2V5cyBhbmQgcm91dGUgdGhlbSAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgYXBwcm9wcmlhdGUgaGFuZGxpbmcgcHJvY2Vzcy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBUaGVyZSBhcmUgbWFueSBmbGFncyB0aGF0IHdpbGwgaGVscCB0aGUgc2NyaXB0IHRvIG5hdmlnYXRlIHRoZSBsaW5lIHRvIHBhcnNlTGluZSBtZXRob2QgZm9yIGZ1cnRoZXIgICAgICAgICAgICAgICAvIwojLyAgICAgICAgdHJhbnNmb3JtYXRpb25zLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFRoaXMgbWV0aG9kIHdpbGwgY2FsbCB0aGUgcGFyc2VMaW5lIGFuZCBmbHVzaCBtZXRob2QgdG8gdHJhbnNmb3JtIGFuZCB0aGUgcHVzaCB0aGUgbGluZSB0byBvdXRwdXQgZmlsZS4gICAgICAgICAgIC8jCiMvICAgICAgICAibXVsX3NlcV9DbnQiIHdpbGwgc3RvcmUgdGhlIGNudHIgZm9yIHRoZSBrZXkgaW4gY2FzZSBvZiBzZXF1ZW5jZSAgYW5kIHVwZGF0ZSBmb3IgZWFjaCBvY2N1cmVuY2Ugb2YgdGhlIGtleSAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgCiMvICAgICBSZXR1cm5zICB0aGUgY291bnQgb2YgbGluZXMgd3JpdHRlbiB0byB0aGUgZmlsZSBhbmQgdGltZXN0YW1wIGZyb20gZmlsZSBmb3IgbG9nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgVXBkYXRlKiowNS8xOCBDb2RlIGZpeCBmb3IgdGhlIGVuY29kZWQgY2hhcmFjdGVycyBzb2x1dGlvbiBiZWxvdyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgUHJvZ3JhbSBjaGVja3MgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgbGVuZ2h0IG9mIHRoZSBsaW5lIHByb3ZpZGVkIGluIHRoZSBwcm9wZXJ0eSBmaWxlIHdpdGggYWN0dWFsIGxlbmd0aCAgIC8jCiMvICAgICAgICAgIG9mIHRoZSBsaW5lIGFuZCBhbHNvIGNoZWNrcyBpZiB0aGVyZSBhcmUgYW55IGVuY29kZWQgY2hhcmFjdGVycyBpZiB0aGVyZSBpcyBkaWZmZXJlbmNlIGFuZCBlbmNvZGVkIGNoYXJhY3RlcnMgICAvIwojLyAgICAgICAgICB0aGUgbG9naWMgc2tpcHMgdGhlIGRpZmZlcmVuY2Ugb2Zmc2V0IHBvcyBvZiB0aGUgZW5jb2RlZCBjaGFyYWN0ZXJzIGFuZCBtYWtlcyB0aGUgbGluZSBjbGVhbi5JbiBhbm90aGVyIHNjZW5hcmlvLyMKIy8gICAgICAgICAgd2hlcmUgdGhlcmUgaXMgbm8gZGlmZmVyZW5jZSBpcyBvYnNlcnZlZCBidXQgZW5jb2RlZCBjaGFyYWN0cmVzIGluIGxpbmUgaW4gdGhhdCBjYXNlIHRoZSBwcm9ncmFtIHdpbGwgcmVwbGFjZSAgIC8jCiMvICAgICAgICAgIHRoZSBlbmNvZGVkIHZhbHVlcyB3aXRoIGVtcHR5IHNwYWNlcyBiYXNlZCBvbiB0aGVpciBpbmRleCBhbmQgbGV0IHRoZSBwcm9ncmFtIHJ1biBzbW9vdGhseSAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgoKCmRlZiBwcm9jZXNzKGpzb25fbG9hZCxpbnAsb3AsdHNPdXRwdXQsZmxlU3plQ2hrLHRhYmxlKToKICAgIAogICAgZmx1c2gsc2VxLHNlcV9leHQsc2VjX29yZCxmb2xsd19SY2RfQ2hhcnMgPSByZWFkTGF5b3V0KGpzb25fbG9hZCkKICAgIGNudCxzZXFfY250LHJlc19jbnQscmVjX2lkPTAsMCwwLDAKICAgIHByb2NfaWQ9anNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImhkZnNfcHJvY19pZCJdCiAgICBpbnNydF90cyA9IHN0cihkYXRldGltZS5kYXRldGltZS5ub3coKSkKICAgIGFzX29mX2R0PScnCiAgICBidXNfZmxhZz0nRmFsc2UnCiAgICBpZiAiYnVzX3Byb2NfZHQiIGluIGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdLmtleXMoKToKCWJ1c19mbGFnPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJidXNfcHJvY19kdCJdCiAgICByZWNfaWRfZmw9J0ZhbHNlJwogICAgbXVsX3NlcV9DbnQ9e30KICAgIGRmbHRfS2V5PScnCiAgICBsZW5fb2ZfbG5lPWludChqc29uX2xvYWRbImRiX3Byb3AiXVswXVsibGVuX29mX2xuZSJdKQogICAgbHNQb3MsbGVQb3M9anNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImxpbmVfZGVmYXVsdF9jaGFyIl1bMF0uc3BsaXQoJywnKQogICAgZnJzdERpY3Qsc2VxRGljdD17fSx7fQogICAgaGRyTG5lLHNQb3MsZVBvcz1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsidHNfdmFsaWQiXVswXS5zcGxpdCgnLCcpCiAgICB0ckxyPWpzb25fbG9hZFsiVHJhaWxlciJdWzBdWyJTZXEiXQogICAgcHJpbnQgJ3N0YXJ0IHRpbWUnK3N0cihkYXRldGltZS5kYXRldGltZS5ub3coKSkKICAgIGlzUG9zLGllUG9zPTAsMAogICAgaXRlbSxyZWNyZF9leHQ9JycsJycKICAgIGZvciBsaW5lIGluIGlucDoKICAgICAgICBvZmZEaWZmID0gbGVuKGxpbmUpLWxlbl9vZl9sbmUKICAgICAgICBwcmV2X0luZHg9Tm9uZQogICAgICAgIHVuaV9DaHI9cmUuZmluZGFsbChyJ1teXHgwMS1ceDdGXXxbXHhBRV0nLGxpbmUpIAogICAgICAgIGlmIGxlbih1bmlfQ2hyKSE9MDoKICAgICAgICAgICAgZm9yIGNociBpbiB1bmlfQ2hyOgoJICAgICAgICBjaHJfSW5keD1saW5lLmluZGV4KGNocikKICAgICAgICAgICAgICAgIGlmICJlbmNvZGVfZmxhZyIgaW4ganNvbl9sb2FkWyJkYl9wcm9wIl1bMF0ua2V5cygpOiAgICAgICAgICAKCSAgICAgICAgICAgaWYgb2ZmRGlmZiE9MCBhbmQgcHJldl9JbmR4IT1jaHJfSW5keDoKICAgICAgICAgICAgICAgICAgICAgIGxpbmU9Jycuam9pbihsaW5lWzA6Y2hyX0luZHhdK2xpbmVbY2hyX0luZHgrMTpdKQogICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgIGxpbmU9Jycuam9pbihsaW5lWzA6Y2hyX0luZHhdKycgJytsaW5lW2Nocl9JbmR4KzE6XSkKICAgICAgICAgICAgICAgICAgIHByZXZfSW5keD1jaHJfSW5keAogICAgICAgICAgICAgICAgICAgI29mZkRpZmYtPTEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICBsaW5lPScnLmpvaW4obGluZVswOmNocl9JbmR4XSsnICcrbGluZVtjaHJfSW5keCsxOl0pCiAgICAgICAgaWYgJ25vX3JlY190eXAnIGluIGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdLmtleXMoKSBhbmQgbm90IGxpbmUuc3RhcnRzd2l0aChoZHJMbmUpIGFuZCBub3QgbGluZS5zdGFydHN3aXRoKHRyTHIpOgogICAJCWRmbHRfS2V5PWZsdXNoCiAgICAgICAgbGluZT1saW5lLnJzdHJpcCgpLmxqdXN0KGxlbl9vZl9sbmUpK2RmbHRfS2V5CiAgICAgICAgaWYgbGluZS5zdHJpcCgpLnN0YXJ0c3dpdGgoaGRyTG5lKToKICAgICAgICAgICB0aW1lU3RhbXA9bGluZVtpbnQoc1Bvcyk6aW50KGVQb3MpXS5zdHJpcCgpCiAgICAgICAgICAgdHNDaGVjaz10bWVTdG1wQ2hlY2soZmxlU3plQ2hrLHRzT3V0cHV0LHRpbWVTdGFtcCx0YWJsZSkKICAgICAgICBpZiBidXNfZmxhZz09J1RydWUnOgoJICAgbG5lLHN0cnRfZHQsZW5kX2R0LHJlY19pZF9mbD1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsiYXNfb2ZfZHQiXVswXS5zcGxpdCgnLCcpCiAgICAgICAgICAgaWYgKGxpbmUuc3RyaXAoKS5zdGFydHN3aXRoKGxuZS5zdHJpcCgpKSk6CiAgICAgICAgICAgICAgaWYgKGludChlbmRfZHQpLWludChzdHJ0X2R0KSk9PTg6CiAgICAgICAgICAgICAgICAgbGluZT1saW5lLnN0cmlwKCkKICAgICAgICAgICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoJ0ZIJyk6CiAgICAgICAgICAgICAgICAgCWFzX29mX2R0PWxpbmVbaW50KGVuZF9kdCktNDppbnQoZW5kX2R0KV0rJy0nK2xpbmVbaW50KHN0cnRfZHQpOmludChzdHJ0X2R0KSsyXSsnLScrbGluZVtpbnQoc3RydF9kdCkrMjppbnQoc3RydF9kdCkrNF0KICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIAlhc19vZl9kdD1saW5lW2ludChzdHJ0X2R0KTppbnQoc3RydF9kdCkrNF0rJy0nK2xpbmVbaW50KHN0cnRfZHQpKzQ6aW50KHN0cnRfZHQpKzZdKyctJytsaW5lW2ludChzdHJ0X2R0KSs2OmludChlbmRfZHQpXQoKICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIGFzX29mX2R0PWxpbmVbaW50KGVuZF9kdCktNDppbnQoZW5kX2R0KV0rJy0nK2xpbmVbaW50KHN0cnRfZHQpOmludChzdHJ0X2R0KSsyXSsnLScrbGluZVtpbnQoc3RydF9kdCkrMzppbnQoc3RydF9kdCkrNV0KICAgICAgICByZWNyZF9leHQ9bGluZVtpbnQobHNQb3MpOmludChsZVBvcyldK2xpbmVbaW50KGlzUG9zKTppbnQoaWVQb3MpXQogICAgICAgIGlmICgoKGxpbmUuc3RhcnRzd2l0aChmbHVzaCkgb3IgbGluZVtpbnQobHNQb3MpOmludChsZVBvcyldPT1mbHVzaCBvciByZWNyZF9leHQ9PWZsdXNoKSBvciAobGluZS5zdGFydHN3aXRoKHNlY19vcmQpIGFuZCBzZWNfb3JkIT0nJykpIG9yIChsaW5lLnN0YXJ0c3dpdGgodHJMcikgb3IgdHJMcj09J2RlZmF1bHQnKSkgYW5kIGNudCE9MDoKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oZnJzdERpY3Qua2V5cygpKSE9MDogCiAgICAgICAgICAgICAgICAgICAgICAgcmVzX2NudCxyZWNfaWQgPSBmbHVzaE91dHB1dChhc19vZl9kdCxidXNfZmxhZyxmcnN0RGljdCxzZXFEaWN0LHNlcV9leHQscmVzX2NudCxqc29uX2xvYWQsc2VxLG9wLHByb2NfaWQsaW5zcnRfdHMsc2VjX29yZCxyZWNfaWQscmVjX2lkX2ZsKQogICAgICAgICAgICAgICAgICAgICAgIGZyc3REaWN0LHNlcURpY3Q9e30se30KICAgICAgICAgICAgICAgICAgICAgICBtdWxfc2VxX0NudD17fSAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgodHJMcik6CiAgICAgICAgICAgICAgICAgICAgICAgY250LHJlY19pZD0wLDAKICAgICAgICAgICAgCiAgICAgICAgaWYgIGxpbmVbaW50KGxzUG9zKTppbnQobGVQb3MpXSBpbiBqc29uX2xvYWQua2V5cygpOgogICAgICAgICAgICBpdGVtPWxpbmVbaW50KGxzUG9zKTppbnQobGVQb3MpXQogICAgICAgICAgICBpZiAic2VxX2lkZW50X0ZMZyIgaW4ganNvbl9sb2FkW2l0ZW1dWzBdLmtleXMoKToKICAgICAgICAgICAgICAgaXNQb3MsaWVQb3M9anNvbl9sb2FkW2l0ZW1dWzBdWyJzZXFfaWRlbnRfcG9zIl1bMF0uc3BsaXQoJywnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaXNQb3MsaWVQb3M9MCwwCiAgICAgICAgICAgIGlmIGxpbmVbaW50KGxzUG9zKTppbnQobGVQb3MpXStsaW5lW2ludChpc1Bvcyk6aW50KGllUG9zKV0gaW4ganNvbl9sb2FkLmtleXMoKToKICAgICAgICAgICAgICAgIGl0ZW09bGluZVtpbnQobHNQb3MpOmludChsZVBvcyldK2xpbmVbaW50KGlzUG9zKTppbnQoaWVQb3MpXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaXRlbT1pdGVtCiAgICAgICAgICAgIGlmIGxlbihzZXEpPT0wIGFuZCAiYXR0cmliIiBpbiBqc29uX2xvYWRbaXRlbV1bMF0ua2V5cygpOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VMaW5lKGl0ZW0sbGluZSxqc29uX2xvYWQpCiAgICAgICAgICAgIGlmIGxlbihzZXEpIT0wIGFuZCBpdGVtIG5vdCBpbiBzZXEgOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VMaW5lKGl0ZW0sbGluZSxqc29uX2xvYWQpCiAgICAgICAgICAgIGlmIGl0ZW0gaW4gc2VxOgogICAgICAgICAgICAgICAgaUNoYXJzPWpzb25fbG9hZFtpdGVtXVswXVsic2VxX2lkZW50X2NoYXIiXQogICAgICAgICAgICAgICAgaWYgbGluZVtpbnQoaXNQb3MpOmludChpZVBvcyldLnN0cmlwKCkgaW4gaUNoYXJzIG9yICdkZWZhdWx0JyBpbiBpQ2hhcnM6CiAgICAgICAgICAgICAgICAgICAgaWYgaXRlbSBub3QgaW4gbXVsX3NlcV9DbnQ6CiAgICAgICAgICAgICAgICAgICAgICAgIG11bF9zZXFfQ250W2l0ZW1dPTAKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBwYXJzZUxpbmUoaXRlbSxsaW5lLGpzb25fbG9hZCkKICAgICAgICAgICAgICAgICAgICBtdWxfc2VxX0NudFtpdGVtXT1tdWxfc2VxX0NudFtpdGVtXSsxICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgbGluZVtpbnQoaXNQb3MpOmludChpZVBvcyldLnN0cmlwKCkgaW4gaUNoYXJzIG9yICdkZWZhdWx0JyBpbiBpQ2hhcnM6CiAgICAgICAgICAgICAgICAgICAgc2VxRGljdFtpdGVtKydfJytzdHIobXVsX3NlcV9DbnRbaXRlbV0pXT1yZXN1bHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmICJhdHRyaWIiIGluIGpzb25fbG9hZFtpdGVtXVswXS5rZXlzKCk6CiAgICAgICAgICAgICAgICAgICAgaWYgIm11bF9yZWNyZF9mcm10IiBpbiBqc29uX2xvYWRbaXRlbV1bMF0ua2V5cygpOgogICAgICAgICAgICAgICAgICAgICAgICBmcnN0RGljdFtpdGVtW2ludChsc1Bvcyk6aW50KGxlUG9zKV1dPXJlc3VsdAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGZyc3REaWN0W2l0ZW1dPXJlc3VsdCAgCiAgICAgICAgICAgIGlmICBmbHVzaD09aXRlbToKICAgICAgICAgICAgICAgIGNudD1jbnQrMQogICAgcmV0dXJuIHJlc19jbnQsdGltZVN0YW1wCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICBwaWdwcm9jZXNzIDogVGhpcyBwcm9jZXNzIGlzIGNhbGxlZCBmb3IgdGhlIGlucHV0IHRoYXQgaGFzIHNpbmdsZSByZWNvcmQgdHlwZSBhbmQgaXMgbW9yZSB0aGFuIGEgZ2lnYWJ5dGUsdGhlIGlucHV0IC8jCiMvICAgICAgICAgICAgICAgIGlzIGNvcGllZCB0byBIREZTIGxvY2F0aW9uIGZpcnN0IGFuZCB1c2VzIHBpZyB0byBwcm9jZXNzIHRoZSBmaWxlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgIE5vdGU6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFRoaXMgbWV0aG9kIHdpbGwgY3JlYXRlIHBpZ3NjcmlwdHMgaW4gdGhlIGVudmlyb25tZW50KGRldix0ZXN0Li5ldGMpIHByb2plY3QvPHByb2plY3QgbmFtZT4vcGlnc2NyaXB0L2ZvbGRlciB3aXRoIC8jCiMvICAgICAgICB0aGUgYXBwcm9wcmlhdGUgc2NyaXB0IHdpdGggbmVjZXNzYXJ5IHBhcmFtZXRlcnMgbGlrZSBtYXBwaW5nIHdpbGwgYmUgd3JpdHRlbiB0byB0aGlzIHNjcmlwdHMuICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFRoZXJlIGlzIHB5dWRmKHBhcnNlLnB5KSBkZXZlbG9wZWQgZm9yIHRoaXMgcHJvY2VzcyB1bmRlciAoLzxlbnZpcm9ubWVudD4vcHJvamVjdC9mcmFtZXdvcmsvKSB0aGF0IHRha2VzIG1hcHBpbmcgIC8jCiMvICAgICAgICBhcyBwYXJhbWV0ZXIgZnJvbSB0aGUgc2NyaXB0IGFuZCBwYXNzIGl0IHRvIHRoZSB1ZGYgdG8gcmV0dXJuIGEgZm9ybWF0dGVkIHN0cmluZy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFRoZXJlIGFyZSAyIHBpZ3NjcmlwdHMgaW52b2x2ZWQgaW4gdGhpcyBwcm9jZXNzICx0aGUgZmlyc3Qgd2lsbCBmZXRjaCB0aGUgYXNfb2ZfZHQgZnJvbSB0aGUgZmlsZSBhbmQgcmV0dXJuIHRvIGEgIC8jCiMvICAgICAgICBmaWxlLlRoZSBsYXRlciBzY3JpcHQgd2lsbCBzZW5kIHVuZm9ybWF0dGVkIGxpbmVzIHRvIHB5dWRmIHRvIGRvIGRhdGEgY2xlYW5zaW5nIGFuZCByZXR1cm5zIGEgZm9ybWF0dGVkIGxpbmUgICAgICAvIwojLyAgICAgICAgd2l0aCBkYXRlIGZyb20gdGhlIHByZXZpb3VzIHBpZyBzY3JpcHQgcmVzdWx0IGFwcGVuZGVkIHRvIGl0LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgICAgICAgICAgICAKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICBSZXR1cm5zICB0aGUgY291bnQgb2YgbGluZXMgd3JpdHRlbiB0byB0aGUgZmlsZSBhbmQgdGltZXN0YW1wIGZyb20gZmlsZSBmb3IgbG9nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiBwaWdwcm9jZXNzKGpzb25fbG9hZCxpbnAsam9iTmFtZSxmbGVObWUsZmxlX25tX1NwbHQsZmxlU3plQ2hrLHRzT3V0cHV0LHRhYmxlLGdfaGRwX2xvYyk6CiAgICBmbHVzaCxzZXEsc2VxX2V4dCxzZWNfb3JkLGZvbGx3X1JjZF9DaGFycyA9IHJlYWRMYXlvdXQoanNvbl9sb2FkKQogICAgbWFwTHN0PScnCiAgICBmb3IgaSBpbiBqc29uX2xvYWRbJ2RiX3Byb3AnXVswXVsnY29sdW1ucyddWzBdW2ZsdXNoXS5zcGxpdCgnfCcpOgogICAgICAgIG1hcExzdCs9c3RyKGpzb25fbG9hZFtmbHVzaF1bMF1bJ2F0dHJpYiddW2ldKSsnfHwnCiAgICBtYXBMc3Q9bWFwTHN0LnJlcGxhY2UoIiciLCcnKS5yZXBsYWNlKCd1JywnJykKICAgIHByaW50ICdtYXBMc3Qgc3RyaW5nIGlzJyxtYXBMc3QKICAgIGxlbl9vZl9sbmU9aW50KGpzb25fbG9hZFsnZGJfcHJvcCddWzBdWyJsZW5fb2ZfbG5lIl0pCiAgICBwcm9jSWQ9anNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImhkZnNfcHJvY19pZCJdCiAgICBpbnNydF90cyA9IHN0cihkYXRldGltZS5kYXRldGltZS5ub3coKSkKICAgIGlmIGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJidXNfcHJvY19kdCJdPT0nVHJ1ZSc6CiAgICAgICAgYXNfb2ZfZHQ9c3RyKGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJhc19vZl9kdCJdKS5yZXBsYWNlKCInIiwnJykucmVwbGFjZSgndScsJycpCiAgICBlbHNlOgogICAgICAgIGFzX29mX2R0PXN0cihkYXRldGltZS5kYXRlLnRvZGF5KCkpCiAgICBoTG5lPWFzX29mX2R0LnJlcGxhY2UoJ1snLCcnKS5yZXBsYWNlKCddJywnJykucmVwbGFjZSgndScsJycpLnNwbGl0KCcsJylbMF0KICAgIHRMbmU9anNvbl9sb2FkWyJUcmFpbGVyIl1bMF1bIlNlcSJdCiAgICB0c1N0bXA9c3RyKGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJ0c192YWxpZCJdKS5yZXBsYWNlKCInIiwnJykucmVwbGFjZSgndScsJycpCiAgICAKICAgIGZsZVRzRXhzdD0iLyVzLyVzL2RhdGV0aW1lLyVzX3ZhbGlkYXRpb24iJShnX2hkcF9sb2Msam9iTmFtZSxmbGVfbm1fU3BsdCkKICAgIHRzRXhzdHJlcz1ybXJIZGZzKGZsZVRzRXhzdCkKICAgIGZsZWluSGRwPSIvJXMvJXMvaW5ib3VuZC8lcyIlKGdfaGRwX2xvYyxqb2JOYW1lLGZsZU5tZSkKICAgIGluSGRwcmVzPXJtckhkZnMoZmxlaW5IZHApCiAgICBmbGVUb0hkcD0iJXMgLyVzLyVzL2luYm91bmQvIiUoaW5wLGdfaGRwX2xvYyxqb2JOYW1lKQogICAgcHJpbnQgZmxlVG9IZHAKICAgIHB1dEhkZnMoZmxlVG9IZHApCgogICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgICAjLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKICAgICAgICAgIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgICAgICAKICAgICAgICAgIy8gICAgICAgICBQaWcgc2NyaXB0LT4xIGZldGNoIHRoZSBhc19vZl9kdCBhbmQgdmFsaWQgdGltZXN0YW1wIG9uIHRoZSBmaWxlLiAgICAgICAgLyMKICAgICAgICAgIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIAogICAgcGlnUmVnID0gInJlZ2lzdGVyIC9ob21lL3BoZGZ0cHVzZXIvJXMvcHJvamVjdC9mcmFtZXdvcmsvdWRmL3BhcnNlLnB5IHVzaW5nIGp5dGhvbiBhcyBteV9zcGVjaWFsX3VkZnM7IFxuIiAlKGdfcHJvZF92YXIpCiAgICBwaWdMaW5lMSA9ICJBID0gTE9BRCAnLyVzLyVzL2luYm91bmQvJXMnIiUoZ19oZHBfbG9jLGpvYk5hbWUsZmxlTm1lKSArIkFTIChsaW5lOmNoYXJhcnJheSk7XG4iCiAgICBwaWdMaW5lMiA9ICJCID0gRklMVEVSIEEgQlkgU1VCU1RSSU5HKGxpbmUsMCwzKT09JyVzJztcbiIlKGhMbmUpCiAgICBwaWdMaW5lMyA9ICJDID0gRk9SRUFDSCBCIEdFTkVSQVRFIG15X3NwZWNpYWxfdWRmcy5mZXRjaEFzX29mX2R0KGxpbmUsJyVzJywnJXMnKTtcbiIlKGFzX29mX2R0LHRzU3RtcCkKICAgIHBpZ0xpbmU0ID0gIlNUT1JFIEMgSU5UTyAnLyVzLyVzL2RhdGV0aW1lLyVzX3ZhbGlkYXRpb24nOyIgJSAoZ19oZHBfbG9jLGpvYk5hbWUsZmxlX25tX1NwbHQpCiAgICAKICAgIHRtU3RtcEZpbGUgPSAnL2hvbWUvcGhkZnRwdXNlci8lcy9wcm9qZWN0LyVzL3BpZ3NjcmlwdC8lc19nZXRkYXRlLnBpZycgJSAoZ19wcm9kX3Zhcixqb2JOYW1lLGZsZV9ubV9TcGx0KQogICAgcHJjRmxlPSdwaWcgdGltZXN0YW1wIHNjcmlwdCcKICAgIG1vZGU9J3cnCiAgICBwaWdKb2JGaWxlID0gZmxlQ2hlY2sodG1TdG1wRmlsZSxwcmNGbGUsbW9kZSkKICAgIHBpZ0pvYkZpbGUud3JpdGUocGlnUmVnK3BpZ0xpbmUxK3BpZ0xpbmUyK3BpZ0xpbmUzK3BpZ0xpbmU0KSAgICAKICAgIHBpZ0pvYkZpbGUuY2xvc2UoKQogICAgcGlnam9iPSAicGlnICVzIiAlICh0bVN0bXBGaWxlKQogICAgb3Muc3lzdGVtKHBpZ2pvYikKICAgIGhhZG9vcEZzSm9iID0gIi8lcy8lcy9kYXRldGltZS8lc192YWxpZGF0aW9uL3BhcnQqIiAlIChnX2hkcF9sb2Msam9iTmFtZSxmbGVfbm1fU3BsdCkKICAgIHJzbHRTdD1jYXRIZGZzKGhhZG9vcEZzSm9iKQogICAgcHJpbnQgcnNsdFN0LnNwbGl0KCd8JykKICAgIGN1clRTVE1wPXJzbHRTdC5zcGxpdCgnfCcpWzFdCiAgICB0c0NoZWNrPXRtZVN0bXBDaGVjayhmbGVTemVDaGssdHNPdXRwdXQsY3VyVFNUTXAsdGFibGUpCiAgICAKCiAgICBmbGVUYmxFeHN0PSIvJXMvJXMvJXMudHh0IiUgKGdfaGRwX2xvYyxqb2JOYW1lLHRhYmxlKQogICAgdGJsRXhzdHJlcz1ybXJIZGZzKGZsZVRibEV4c3QpCiAgICBmbGVDbnRFeHN0PSIvJXMvJXMvY291bnQvJXNfY291bnQiJShnX2hkcF9sb2Msam9iTmFtZSx0YWJsZSkKICAgIGNudEV4c3RyZXM9cm1ySGRmcyhmbGVDbnRFeHN0KQoKICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiAgICAgICAgICMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgCiAgICAgICAgICMvICBQaWcgc2NyaXB0LT4yIFByb2Nlc3MgdGhlIGlucHV0IGxpbmVzIGFuZCBzdG9yZXMgdGhlIGZvcm1hdHRlZCBsaW5lcyBhbmQgY291bnQuIC8jCiAgICAgICAgICMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiAgICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAJCiAgICBwaWdwcmNSZWcgPSAicmVnaXN0ZXIgL2hvbWUvcGhkZnRwdXNlci8lcy9wcm9qZWN0L2ZyYW1ld29yay91ZGYvcGFyc2UucHkgdXNpbmcganl0aG9uIGFzIG15X3NwZWNpYWxfdWRmczsgXG4iICUoZ19wcm9kX3ZhcikKICAgIHBpZ3ByY0xpbmUxID0gIkEgPSBMT0FEICcvJXMvJXMvaW5ib3VuZC8lcyciJShnX2hkcF9sb2Msam9iTmFtZSxmbGVObWUpICsiIEFTIChsaW5lOmNoYXJhcnJheSk7XG4iCiAgICBwaWdwcmNMaW5lMiA9ICJCID0gRklMVEVSIEEgQlkgU1VCU1RSSU5HKGxpbmUsMCwzKSE9JyVzJyBBTkQgU1VCU1RSSU5HKGxpbmUsMCwzKSE9JyVzJztcbiIlKGhMbmUsdExuZSkKICAgIHBpZ3ByY0xpbmUzID0gIkMgPSBGT1JFQUNIIEIgR0VORVJBVEUgbXlfc3BlY2lhbF91ZGZzLmxuZVByb2Nlc3MobGluZSwnJXMnLCclcycsJyVzJywnJXMnLCclcycpO1xuIiUobWFwTHN0LHByb2NJZCxsZW5fb2ZfbG5lLGluc3J0X3RzLHJzbHRTdC5zcGxpdCgnfCcpWzBdKQogICAgcGlncHJjTGluZTQgPSAiU1RPUkUgQyBJTlRPICcvJXMvJXMvJXMudHh0JyBVU0lORyBQaWdTdG9yYWdlKCk7XG4iICUgKGdfaGRwX2xvYyxqb2JOYW1lLHRhYmxlKQogICAgcGlncHJjTGluZTUgPSAiRCA9IEZPUkVBQ0ggKEdST1VQIEMgQUxMKSBHRU5FUkFURSBDT1VOVChDKTtcbiIKICAgIHBpZ3ByY0xpbmU2ID0gIlNUT1JFIEQgSU5UTyAnLyVzLyVzL2NvdW50LyVzX2NvdW50JyBVU0lORyBQaWdTdG9yYWdlKCk7XG4iJShnX2hkcF9sb2Msam9iTmFtZSx0YWJsZSkKIAogICAgCiAgICBwaWdTY3JwRmlsZSA9ICcvaG9tZS9waGRmdHB1c2VyLyVzL3Byb2plY3QvJXMvcGlnc2NyaXB0LyVzX3ByY2ZpbGUucGlnJyAlIChnX3Byb2RfdmFyLGpvYk5hbWUsZmxlX25tX1NwbHQpCiAgICBwcmNGbGU9J3BpZyBwcmFzaW5nIHNjcmlwdCcKICAgIG1vZGU9J3cnCiAgICBwaWdwcmNGaWxlID0gZmxlQ2hlY2socGlnU2NycEZpbGUscHJjRmxlLG1vZGUpCiAgICBwaWdwcmNGaWxlLndyaXRlKHBpZ3ByY1JlZytwaWdwcmNMaW5lMStwaWdwcmNMaW5lMitwaWdwcmNMaW5lMytwaWdwcmNMaW5lNCtwaWdwcmNMaW5lNStwaWdwcmNMaW5lNikgICAgCiAgICAKICAgICAgICAKICAgIHBpZ3ByY0ZpbGUuY2xvc2UoKQogICAgcGlncHJjam9iPSAicGlnIC1NICVzIiAlIChwaWdTY3JwRmlsZSkKICAgIG9zLnN5c3RlbShwaWdwcmNqb2IpCiAgICBmbGVUYmxFeHN0PSIvJXMvJXMvJXMudHh0IiUgKGdfaGRwX2xvYyxqb2JOYW1lLHRhYmxlKQogICAgcnRybkNkPXRlc3RIZGZzKGZsZVRibEV4c3QpCiAgICBwcmludCBydHJuQ2QKICAgIGlmIGludChydHJuQ2QpPT0xOgogICAgICAgIGZubFN0cmc9J1BpZyBQcm9jZXNzIGZhaWxlZCBwbGVhc2UgY2hlY2sgdGhlIHBpZyBsb2cnCiAgICAgICAgc2VuZEVycm9tYWlsKGZubFN0cmcsJ1BpZyBQcm9jZXNzIEZhaWxlZCcsJycpCiAgICAgICAgc3lzLmV4aXQoMSkKICAgIGhhZG9vcEZzY250Sm9iID0gIi8lcy8lcy9jb3VudC8lc19jb3VudC9wYXJ0KiIgJSAoZ19oZHBfbG9jLGpvYk5hbWUsdGFibGUpCiAgICByc2x0Q250ID0gY2F0SGRmcyhoYWRvb3BGc2NudEpvYikKICAgIHByaW50ICdyZXN1bHQgY291bnQgaXMnLHJzbHRDbnQKICAgIHJldHVybiBpbnQocnNsdENudCkscnNsdFN0LnNwbGl0KCd8JylbMV0KICAgCiAgIAoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICB2YWxpZGF0ZSA6IFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBiZXR3ZWVuIHRoZSBjb3VudHMgcmV0dXJuZWQgZnJvbSB0aGUgcHJvY2VzcyBhbmQgZXh0ZXJuYWwgdGFibGUgYW5kIGluc2VydHMgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgIHJvd3MgaW50byB0aGUgaW50ZXJuYWwgdGFibGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgIE5vdGU6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICBUaGlzIG1ldGhvZCBoYXMgdGhlIGZsYWcgdHNfdGxfRmxnIHdoaWNoIHdpbGwgc2V0IHRvICJZIiB3aGVuIGl0IGlzIFRMIGFuZCAiTiIgd2hlbiBpdCBpcyBUUyBiYXNlIG9uIHRoZSAgICAgICAgIC8jCiMvICAgICAgICAgICBvcGVyYXRpb24gdmFyaWFibGUgYW5kIHdpbGwgcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBoYXdxIGZ1bmN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgIFJldHVybnMgTm90aGluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiB2YWxpZGF0ZShjb25uLGN1cixzY2hlbWEsdGFibGVuYW1lLGZDb3VudCxvcGVyYXRpb24sZnVuYyk6CiAgICBjbnRfQ2hrPSdzZWxlY3QgY291bnQoKikgZnJvbSAlcy4lc19leHQnJShzY2hlbWEsdGFibGVuYW1lKQogICAgaWYgb3BlcmF0aW9uPT0nVFMnOgogICAgCXRzX3RsPSd0cycKICAgICAgICB0c190bF9GbGc9J04nCiAgICAgICAgaW5zcnQ9ICJzZWxlY3QgJXMoJyVzLiVzX2V4dCcsJyVzLiVzXyVzJywnJXMnKTsiJShmdW5jLHNjaGVtYSx0YWJsZW5hbWUsc2NoZW1hLHRhYmxlbmFtZSx0c190bCx0c190bF9GbGcpCiAgICBlbHNlOgogICAgICAgIHRzX3RsX0ZsZz0nWScKICAgICAgICBpbnNydD0gInNlbGVjdCAlcygnJXMuJXNfZXh0JywnJXMuJXMnLCclcycpOyIlKGZ1bmMsc2NoZW1hLHRhYmxlbmFtZSxzY2hlbWEsdGFibGVuYW1lLHRzX3RsX0ZsZykKICAgIHRyeToKICAgICAgICBwcmludCBpbnNydCAKICAgICAgICBwcmludCBjbnRfQ2hrCiAgICAgICAgY3VyLmV4ZWN1dGUoY250X0NoaykKICAgICAgICBleHRfQ250PWN1ci5mZXRjaG9uZSgpWzBdCiAgICAgICAgcHJpbnQgZXh0X0NudAogICAgICAgIHByaW50IHR5cGUoZkNvdW50KSx0eXBlKGV4dF9DbnQpCiAgICAgICAgaWYgZXh0X0NudD09ZkNvdW50OgoJICAgY3VyLmV4ZWN1dGUoaW5zcnQpCiAgICAgICAgICAgcmVzdWx0U2V0PWN1ci5mZXRjaG9uZSgpCiAgICAgICAgICAgY29ubi5jb21taXQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgcHJpbnQgJ2NvdW50cyBkb2VzbnQgbWF0Y2ggcGxlYXNlIGNoZWNrIHRoZSBsb2cgdGFibGVzJwogICAgICAgICAgIGVyck1zZz0iVGhlIENvdW50cyBiZXR3ZWVuIHRoZSBwcm9ncmFtIGNvdW50ZXIgLSAlcyBhbmQgZXh0ZXJuYWwgdGFibGUgLSAlcyBjb3VudCBkb2VzbnQgbWF0Y2giICUoc3RyKGZDb3VudCksc3RyKGV4dF9DbnQpKQoJICAgZGVNc2c9IlBsZWFzZSBjaGVjayB0aGUgbG9ncy4lcyB0YWJsZSBmb3IgbW9yZSBpbmZvIiUodGFibGVuYW1lKSAgCgkgICBmbmxTdHJnPWVyck1zZysnXG4nK2RlTXNnCgkgICBzZW5kRXJyb21haWwoZm5sU3RyZywnQ291bnRzIERvZXNudCBtYXRjaCcsdGFibGVuYW1lKQogICAgICAgICAgIHN5cy5leGl0KDEpCiAgICAgICAgcHJpbnQgJ3Jlc3VsdFNldCBpcyAnLHJlc3VsdFNldAogICAgICAgIHByaW50ICdpbnNlcnQgY29tcGxldGUnCiAgICBleGNlcHQgcHN5Y29wZzIuRXJyb3IsIGU6CiAgICAgICAgcHJpbnQgJ0Vycm9yICVzJyUgZQogICAgICAgIGVyck1zZz0nRXJyb3I6IERhdGFiYXNlIG9wZXJhdGlvbmFsIGlzc3VlJwogICAgICAgIGRlTXNnPSdERUJVRzpQbGVhc2UgY2hlY2sgdGhlIHF1ZXJ5IHlvdSBwcm92aWRlZCAlcyclKGUpCiAgICAgICAgZm5sU3RyZz1lcnJNc2crJ1xuJytkZU1zZwogICAgICAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCdEYXRhYmFzZSBPcGVyYXRpb25hbCBpc3N1ZScsJycpCiAgICAgICAgc3lzLmV4aXQoMSkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgIG1haW4gOiBUaGlzIGlzIHRoZSBzdGFydCBvZiB0aGUgc2NyaXB0IHdoZXJlIGFsbCB0aGUgYXJndW1lbnRzIGFyZSByZWFkIGFuZCBwYXNzZWQgdG8gZWFjaCBvZiB0aGUgbWV0aG9kcyAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgcHJvY2VzcyBhbmQgdmFsaWRhdGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgTm90ZTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgIFRoaXMgbWV0aG9kZSBoYXMgdGhlICJmbGVfUm12bF9GbGciIGZsYWcgd2hpY2ggd2lsbCB0ZWxsIHRoZSBzY3JpcHQgdG8gbm90IHRvIHJlbW92ZSB0aGUgaW5wdXQgZmlsZSBhcyBpdCBoYXMgLyMKIy8gICAgICAgICAgICAgICBtdWxpdHBsZSBsYXlvdXRzIHRvIGJlIHByb2Nlc3NlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKCgpkZWYgbWFpbihhcmd1bWVudHMpOgogICAgcHJpbnQgYXJndW1lbnRzCiAgICBzcmNQcnA9YXJndW1lbnRzWzBdCiAgICBpbnB1dF9maWxlPWFyZ3VtZW50c1sxXQogICAgdHJuU2ZybT1pbnQoYXJndW1lbnRzWzJdKQogICAgaW51X0Zsbm1lPWlucHV0X2ZpbGUuc3BsaXQoJy8nKVstMV0KICAgIGlmICdfJyBpbiBpbnB1dF9maWxlLnNwbGl0KCcvJylbLTFdOgoJZmxlX25tX1NwbHQ9aW5wdXRfZmlsZS5zcGxpdCgnLycpWy0xXS5zcGxpdCgnXycpWzBdCiAgICBlbHNlOgogICAgICAgIGZsZV9ubV9TcGx0PWlucHV0X2ZpbGUuc3BsaXQoJy8nKVstMV0uc3BsaXQoJy5kYXQnKVswXSAgCiAgICBwcmludCBmbGVfbm1fU3BsdAogICAgb3V0UGF0aD1pbnB1dF9maWxlLnNwbGl0KCcvJykKICAgIHByaW50IHN0cihkYXRldGltZS5kYXRldGltZS5ub3coKSkKICAgIGZsZVN6ZUNoaz1GYWxzZQogICAgcmVSdW49MAogICAgZXhlY0xzdD1bXQogICAgY29ubkxzdD1bXQogICAgaWYgbGVuKGFyZ3VtZW50cyk+MzoKICAgICAgICBpZiBhcmd1bWVudHNbM10uc3BsaXQoJyMnKVswXT09J3JlcnVuJzoKICAgICAgICAgICAgcmVSdW49aW50KGFyZ3VtZW50c1szXS5zcGxpdCgnIycpWy0xXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb25uTHN0PVtpbnQoeCkgZm9yIHggaW4gYXJndW1lbnRzWzNdLnNwbGl0KCcjJylbLTFdLnNwbGl0KCcsJyldCiAgICBwcmludCByZVJ1bixjb25uTHN0CiAgICBmbGVQdGg9Jy8nLmpvaW4oc3JjUHJwLnNwbGl0KCcvJylbMDotMl0pKycvanNvbi8nCiAgICBwcmludCAnYWJzb2x1dGUgZmlsZSBwYXRoJyxmbGVQdGgKICAjIEpzb24gcG9pbnRlciBQcm9wZXJ0eSBmaWxlIGNoZWNrCiAgICBwcmNGbGU9J3BvaW50ZXIgdG8gSnNvbiBwcm9wZXJ0eSBmaWxlJwogICAgbW9kZT0ncicKICAgIGpzb25TcmNQbnRyPSBmbGVDaGVjayhzcmNQcnAscHJjRmxlLG1vZGUpCiAgICAgICAgCiAgICBmb3IgcHJwIGluIGpzb25TcmNQbnRyOgogICAgICAgIGZsZVBudGVyPXBycC5zcGxpdCgnfCcpWzFdLnN0cmlwKCkKICAgICAgICBpZiBwcnAuc3BsaXQoJ3wnKVswXSE9J1NSJzoKCSAgICBzck5vPWludChwcnAuc3BsaXQoJ3wnKVswXS5zdHJpcCgpKQogICAgICAgICAgICBpZiByZVJ1biE9MDoKICAgICAgICAgICAgICAgIGlmIHNyTm8+PXJlUnVuOgogICAgICAgICAgICAgICAgICAgZXhlY0xzdC5hcHBlbmQoZmxlUG50ZXIpCiAgICAgICAgICAgIGVsaWYgbGVuKGNvbm5Mc3QpIT0wOgogICAgICAgICAgICAgICAgaWYgc3JObyBpbiBjb25uTHN0OgogICAgICAgICAgICAgICAgICAgIHByaW50ICdjYW1lIGhlcmUnCiAgICAgICAgICAgICAgICAgICAgZXhlY0xzdC5hcHBlbmQoZmxlUG50ZXIpCiAgICAgICAgICAgIGVsc2U6CQkKICAgICAgICAgICAgICAgIGV4ZWNMc3QuYXBwZW5kKGZsZVBudGVyKQogICAgcHJpbnQgZXhlY0xzdAogICAgZ19ncF9ob3N0LGdfZ3BfZGIsZ19oZHBfbG9jLG53X0RyaXZlPWdldENvbm4oKQogICAgdHJ5OgogICAgICAgICAgICBjb25uID0gcHN5Y29wZzIuY29ubmVjdCgiaG9zdGFkZHI9JXMgZGJuYW1lPSVzIiAlIChnX2dwX2hvc3QsZ19ncF9kYikpCiAgICAgICAgICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGV4Y2VwdCAgcHN5Y29wZzIuRXJyb3IsIGU6CiAgICAgICAgICAgIHByaW50ICdVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgZGF0YWJhc2UgJXMnJSBlCiAgICAgICAgICAgIGVyck1zZz0nRXJyb3I6IERhdGFiYXNlIGNvbm5lY2l0aXZpdHkgaXNzdWVzIC0lcycgJSBlCiAgICAgICAgICAgIGRlTXNnPSdERUJVRzpQbGVhc2UgY2hlY2sgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb25zJwogICAgICAgICAgICBmbmxTdHJnPWVyck1zZysnXG4nK2RlTXNnCiAgICAgICAgICAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCdJc3N1ZSBpbiBEYXRhYmFzZSBDb25uZWN0aW9uIFN0cmluZycsJycpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICBpZiB0cm5TZnJtPT0wOgogICAgICAgICAjSW5wdXQgZmlsZSBDaGVjawogICAgICAgICBwcmNGbGU9J2lucHV0IGZpbGUgb24gbndfZHJpdmUnCiAgICAgICAgIG1vZGU9J3InCiAgICAgICAgIGlucD1mbGVDaGVjayhpbnB1dF9maWxlLHByY0ZsZSxtb2RlKQogICAgCiAgICBmb3IgZmxlIGluIGV4ZWNMc3Q6CiAgICAgICAgbGF5b3V0PWZsZVB0aCtmbGUKICAgICAgICBwcmludCBsYXlvdXQKICAgICNKc29uIGxheW91dCBjaGVjayAKICAgICAgICBwcmNGbGU9J0pzb24gTGF5b3V0IGZpbGUnCiAgICAgICAgbW9kZT0ncicKICAgICAgICBsYXlvdXRfRmlsZT1mbGVDaGVjayhsYXlvdXQscHJjRmxlLG1vZGUpCiAgICAgICAganNvbl9sb2FkID0ganNvbi5sb2FkKGxheW91dF9GaWxlKSAgICAgICAgICAgICAgIAogICAgICAgIHNjaGVtYT1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsic2NoZW1hIl0KICAgICAgICB0YWJsZT1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsidGFibGUiXQogICAgICAgIG9wZXJhdGlvbj1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsib3BlcmF0aW9uIl0KICAgICAgICBmdW5jPWdfZnVuY192YXIKICAgICAgICBpZiAibXVsX2ZsZV9GbGciIGluIGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdLmtleXMoKToKICAgICAgICAgICAgZmxlX25tX1NwbHQ9dGFibGUKICAgICAgICBjbnQsdG1TdG1wPTAsJycKICAgICAgICBtLHN0cnQsc3RwPTAsMCwwCiAgICAgICAgZmxlUGF0aD1bXQogICAgICAgIHdoaWxlIG08KGxlbihvdXRQYXRoKS0xKToKICAgICAgICAgICAgaWYgb3V0UGF0aFttXT09JyVzJyAlbndfRHJpdmU6CiAgICAgICAgICAgICAgICBzdHJ0PW0KICAgICAgICAgICAgaWYgb3V0UGF0aFttXT09J2luYm91bmQnOgogICAgICAgICAgICAgICAgc3RwPW0KICAgICAgICAgICAgbSs9MQogICAgICAgIGZvciBuIGluIHJhbmdlKHN0cnQrMSxzdHApOgogICAgICAgICAgICBmbGVQYXRoLmFwcGVuZChvdXRQYXRoW25dKQoKICAgICAgICBwcm9nSm9iUGF0aD0nLycuam9pbihmbGVQYXRoKQogICAgICAgIGpvYkZpbGVOYW1lID1vdXRQYXRoW2xlbihvdXRQYXRoKS0xXS5zcGxpdCgnLicpCiAgICAgICAgam9iTmFtZSA9IHByb2dKb2JQYXRoLnNwbGl0KCcvJylbLTFdLmxvd2VyKCkKICAgICAgICBwcmludCBwcm9nSm9iUGF0aCxqb2JOYW1lCiAgICAgCiAgICAgICAgdHNWYWxpZD0nL2hvbWUvcGhkZnRwdXNlci8lcy8lcy9sb2dzLyVzX3RzdG1wLnR4dCclKGdfcHJvZF92YXIsam9iTmFtZSxmbGVfbm1fU3BsdCkKICAgICAgICBwcmNGbGU9J3RpbWVzdGFtcCBsb2cgZmlsZScKICAgICAgICBtb2RlPSdhKycKICAgICAgICB0c091dHB1dD1mbGVDaGVjayh0c1ZhbGlkLHByY0ZsZSxtb2RlKQogICAgICAgIGlmIG9zLnBhdGguZ2V0c2l6ZSh0c1ZhbGlkKT09MDoKICAgICAgICAgICAgcHJpbnQgJ0dldHMgaGVyZScKICAgICAgICAgICAgZmxlU3plQ2hrPVRydWUKICAgICAgICAgICAgICAKICAgICAgICBpZiB0cm5TZnJtPT0wOgogICAgICAgICAjIG91dHB1dCBmaWxlIGxvY2F0aW9uIG9uIG53X2RyaXZlIGxvY2F0aW9uIGNoZWNrCiAgICAgICAgICAgIGZPdXRwdXQ9Jy8lcy8lcy93aXAvJXMudHh0JyUobndfRHJpdmUscHJvZ0pvYlBhdGgsdGFibGUpCiAgICAgICAgICAgIHByY0ZsZT0nT3V0cHV0IGZpbGUgb24gbndfZHJpdmUnCiAgICAgICAgICAgIG1vZGU9J3cnCiAgICAgICAgICAgIG91dHB1dD1mbGVDaGVjayhmT3V0cHV0LHByY0ZsZSxtb2RlKQogICAgICAgICAgICBjbnQsdG1TdG1wID0gcHJvY2Vzcyhqc29uX2xvYWQsaW5wLG91dHB1dCx0c091dHB1dCxmbGVTemVDaGssdGFibGUpCiAgICAgICAgICAgIG91dHB1dC5jbG9zZSgpCiAgICAgICAgICAgIHByaW50IGNudAogICAgICAgICAgICBtb3ZlVG9IREZTKHByb2dKb2JQYXRoLGpvYk5hbWUsdGFibGUsZ19oZHBfbG9jLG53X0RyaXZlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNudCx0bVN0bXA9cGlncHJvY2Vzcyhqc29uX2xvYWQsaW5wdXRfZmlsZSxqb2JOYW1lLGludV9GbG5tZSxmbGVfbm1fU3BsdCxmbGVTemVDaGssdHNPdXRwdXQsdGFibGUsZ19oZHBfbG9jKQogICAgICAgIAoKICAgICAgICB2YWxpZGF0ZShjb25uLGN1cixzY2hlbWEsdGFibGUsY250LG9wZXJhdGlvbixmdW5jKQogICAgICAgIHRzT3V0cHV0LndyaXRlKHRtU3RtcCsnXG4nKQogICAgICAgIHRzT3V0cHV0LmNsb3NlKCkKICAgICAgICBpZiB0cm5TZnJtPT0wOgogICAgICAgICAgIGlucC5zZWVrKDApCiAgICBvcy5yZW1vdmUoaW5wdXRfZmlsZSkKICAgIHByaW50ICdmaWxlIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5JwogICAgY29ubi5jb21taXQoKQogICAgY3VyLmNsb3NlKCkKICAgIGNvbm4uY2xvc2UoKQogICAgaWYgdHJuU2ZybT09MDoKICAgICAgIGlucC5jbG9zZSgpCiAgICBwcmludCAnY29tcGxldGVkJwogICAgcHJpbnQgc3RyKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKQoKCmlmIF9fbmFtZV9fPT0iX19tYWluX18iOgogICAgaWYgbGVuKHN5cy5hcmd2KSBpbiAoMiwzLDQsNSk6CiAgICAgICAgbWFpbihzeXMuYXJndlsxOl0pCiAgICAgICAgIAogICAgZWxzZToKICAgICAgICBwcmludCAiTmVlZHMgYW4gbGF5b3V0LCBpbnB1dCBmaWxlIGFyZ3VtZW50IGFuZCBmbGlwIGNvZGUgZWl0aGVyMCBmb3IgbXV0bGlwbGUgcmVjb3JkIHR5cGUgZmlsZXMgYW5kIHVzZSAxIGZvciBpbnB1dCBmaWxlIHdpdGggc2luZ2xlIHJlY29yZHR5cGUgYW5kIG1vcmUgdGhhbiBhIGdpZ2FieXRlIGZvciB0aGUgcHJvZ3JhbSB0byBwcm9jZWVkIGFuZCBvcHRpb25hbCByZXJ1biBhbmQgbGlzdCBhcmd1bWVudCB3aGVuIHByb2dyYW0gZXhpdGVkIGFibm9ybWFsbHkiCiAgICAgICAgZXJyTXNnPSdFcnJvcjogQXJ1Z21lbnRzIGVycm9yJwogICAgICAgIGRlTXNnPSdERUJVRzpOZWVkcyBhbiBsYXlvdXQsIGlucHV0IGZpbGUgYXJndW1lbnQgZm9yIHRoZSBwcm9ncmFtIHRvIHByb2NlZWQnCiAgICAgICAgZm5sU3RyZz1lcnJNc2crJ1xuJytkZU1zZwogICAgICAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCdJbnRpYWwgQXJ1Z3VtZW50IEVycm9yJywnJykKICAgICAgICBzeXMuZXhpdCgxKQ==</text>
      </register>
      <register name="&quot;" type="4">
        <text>created inital version to move it to tags Kasyap/Kamal</text>
      </register>
      <register name="2" type="4">
        <text encoding="base64">IyEgL2Jpbi9iYXNoCgplbnY9J2Rldl9waGFzZScKCnRkeT1gZGF0ZSArJVktJW0tJWRgClRJTUVTVEFNUD1gZGF0ZSAiKyVZLSVtLSVkICVIOiVNOiVTImAKCiNJbnRpYWxpemluZyB0aGUgYXJyYXlzIHdpdGggbGlzdCBvZiB2YWxpZCBhcmd1bWVudCB2YWx1ZXMKCmRiQXJyPSgnUElWVERCMCcgJ1BJVkREQjAnICdQSVZQREIwJyAnUElWU0RCMCcpCm9wdG5sQXJnYXJyMT0oJ1BSRVYnICdDVVJSJykKb3B0bmxBcmdhcnIyPSgnVVAnICdET1dOJykKCmhvc3RTcmM9J3NlcnZlci5wcm9wZXJ0aWVzJwojIGNoZWNrcyB3aGV0aGVyIHJpZ2h0IGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHNjcmlwdC4KaWYgW1sgJCMgLWVxIDAgfHwgJCMgLWd0IDMgXV07IHRoZW4KCiAgIGVjaG8gIldyb25nIGFyZ3VtZW50IGxpc3QgcGxlYXNlIHBhc3MgPGRhdGFiYXNlIG5hbWU+IGFzIHJlcXVpcmVkIGFyZ3VtZW50IGFuZCBvcHRpb25hbCBhcmd1bWVudHMgPHR5cGUgb2YgcXVlcnkgQ1VSUj4gIGFuZCBET1dOIGFzIHRoaXJkIGFyZ3VtZW50IHdoZW4gdGhlcmUgYXJlIHNlcnZlciB1cCBmb3IgdGhlIG9uZSB0aGF0IGFyZSBub3QgYWxpdmUgYmVmb3JlLiBCeSBkZWFmdWx0IHRoZSBwcm9ncmFtIGtpbGwgdGhlIHByZXZpb3VzbHkgaHVuZyBxdWVyaWVzIgogICBleGl0IDEKCmVsaWYgIFtbICQjIC1lcSAxICYmICIke2RiQXJyW0BdfSIgPX4gJDEgXV07IHRoZW4KCiAgIERBVEFCQVNFPSQxCiAgIE9QVElPTjE9IlBSRVYiCiAgIE9QVElPTjI9IlVQIgoKZWxpZiBbWyAkIyAtZXEgMiAmJiAiJHtkYkFycltAXX0iID1+ICQxICYmICIke29wdG5sQXJnYXJyMVtAXX0iID1+ICQyIF1dOyB0aGVuCgogICBEQVRBQkFTRT0kMQogICBPUFRJT04xPSQyCiAgIE9QVElPTjI9IlVQIgoKZWxpZiBbWyAkIyAtZXEgMyAmJiAiJHtkYkFycltAXX0iID1+ICQxICYmICIke29wdG5sQXJnYXJyMVtAXX0iID1+ICQyICAmJiAiJHtvcHRubEFyZ2FycjJbQF19IiA9fiAkMyAgXV07IHRoZW4KCiAgIERBVEFCQVNFPSQxCiAgIE9QVElPTjE9JDIKICAgT1BUSU9OMj0kMwoKZWxzZQoKICAgICBlY2hvICJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgLSIgJDEsJDIKICAgICBleGl0IDEKCmZpCgppZiBbWyAtZiBzZXJ2ZXJfbG9naW5fc3RhdHNfJHt0ZHl9LmxvZyAmJiAkMiAhPSAiQ1VSUiIgJiYgJDMgIT0gIkRPV04iIF1dOyB0aGVuCgogICBlY2hvICJQcm9jZXNzIHJhbiBvbiBhbGwgc2VydmVycyxDaGVjayB0aGUgc2VydmVyIGxvZ2luIHN0YXRzIGlmIHRoZXJlIGFueSBkb3duIG5vZGVzIHRoZW4gcGFzcyB0aGlyZCBhcmd1bWVudCBhcyBET1dOIHRvIHJ1biB0aGUgcHJvY2VzcyBmb3IgdGhlIGRvd24gcHJvY2VzcyIKICAgZXhpdCAxCgplbGlmIFtbIC1mIHNlcnZlcl9sb2dpbl9zdGF0c18ke3RkeX0ubG9nICYmICQyID09ICJDVVJSIiBdXTsgdGhlbgoKICAgZWNobyAiUHJvY2VzcyBzdGFydGVkIHRvIGtpbGwgY3VycmVudCBydW5uaW5nIHF1ZXJpZXMiCgplbGlmIFtbIC1mIHNlcnZlcl9sb2dpbl9zdGF0c18ke3RkeX0ubG9nICYmICQzID09ICJET1dOIiBdXTsgdGhlbgoKICAgZWNobyAiUmV0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgZmFpbGVkIGhvc3QuLi4uLi4uLi4uLi4iCiAgIGhvc3RTcmM9J3NlcnZlcl9sb2dpbl9zdGF0c18nJHt0ZHl9Jy5sb2cnCgplbHNlCiAgIGVjaG8gIlNFUlZFUjpTVEFUVVNMT0dNRVNTQUdFIiAgPiAgIHNlcnZlcl9sb2dpbl9zdGF0c18ke3RkeX0ubG9nCmZpCgoKI3NlcnZlciBzdGF0cyBmaWxlCgoKZm9yIG5hbWUgIGluIGBhd2sgJyhOUiA+MSkgJiYgJDEgIX4gLzpyZWFjaGFibGUvIHtwcmludCAkMX0nICRob3N0U3JjYAoKICAgIGRvCgogICAgICBzZXJ2ZXI9IiQoY3V0IC1kIDogLWYxIDw8PCIkbmFtZSIpIgogICAgICBpcD0iJChjdXQgLWQgOiAtZjIgPDw8IiRuYW1lIikiCiAgICAgIHBpbmdUZXN0PWBwaW5nIC1jIDEgJGlwIHwgZ3JlcCBVbnJlYWNoYWJsZSB8IHdjIC1sYAoKICAgICAgaWYgWyAkcGluZ1Rlc3QgLWVxIDAgXTsgdGhlbgogICAgICAgICBlY2hvICRzZXJ2ZXIiOiIkaXA6InJlYWNoYWJsZSBvbiAtIiAkVElNRVNUQU1QID4+IHNlcnZlcl9sb2dpbl9zdGF0c18ke3RkeX0ubG9nCiAgICAgICAgIGVjaG8gIkNvbm5lY3RlZCB0byAiICRzZXJ2ZXIKICAgICAgICAgc3NoIHJvb3RAJHNlcnZlciAiYmFzaCAtcyIgPCBmaW5kc3RhbGVxdWVyaWVzX3YwLjEuc2ggJERBVEFCQVNFICAkT1BUSU9OMQogICAgICBlbHNlCiAgICAgICAgIGVjaG8gJHNlcnZlciI6IiRpcDoiVW5yZWFjaGFibGUgb24gLSIgJFRJTUVTVEFNUCA+PiBzZXJ2ZXJfbG9naW5fc3RhdHNfJHt0ZHl9LmxvZwoKCiAgICAgIGZpCgogICAgZG9uZTs=</text>
      </register>
      <register name="3" type="4">
        <text>de_msg
        emAil(fnlStrg</text>
      </register>
      <register name="4" type="4">
        <text encoding="base64">JycnCkNyZWF0ZWQgb24gRmViIDE2LCAyMDE3CgpAYXV0aG9yOiBkbmFnaXJlZGR5Z2FyaQonJycKaW1wb3J0IG9zLHN5cwppbXBvcnQganNvbgppbXBvcnQgcHN5Y29wZzIKaW1wb3J0IGRhdGV0aW1lCmltcG9ydCBkYXRldGltZSx0aW1lCmltcG9ydCBjb21tYW5kcwppbXBvcnQgbG9nZ2luZwppbXBvcnQgc210cGxpYgppbXBvcnQgYmFzZTY0CmltcG9ydCBzdWJwcm9jZXNzCmZyb20gZW1haWwubWltZS5tdWx0aXBhcnQgaW1wb3J0IE1JTUVNdWx0aXBhcnQKZnJvbSBlbWFpbC5taW1lLmFwcGxpY2F0aW9uIGltcG9ydCBNSU1FQXBwbGljYXRpb24KZnJvbSBlbWFpbC5NSU1FQmFzZSBpbXBvcnQgTUlNRUJhc2UKZnJvbSBlbWFpbC5taW1lLnRleHQgaW1wb3J0IE1JTUVUZXh0CmZyb20gZW1haWwgaW1wb3J0IEVuY29kZXJzCmltcG9ydCBDb25maWdQYXJzZXIKaW1wb3J0IHJlCiNpbXBvcnQgZWJjZGljCmdfdGVzdF92YXI9J3Byb2RfcGhhc2UnCmdfZnVuY192YXI9J3JlcG9ydGluZy5maWxlbG9hZCcKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICB2YWxpZGF0ZUVtYWlsIDogIFZhbGlkYXRlcyBhbGwgdGhlIGVtYWlsIGlkIGluIHRoZSBwcm9wZXJ0eSBmaWxlIHRvIGNoZWNrIHdoZXRoZXIgdGhleSBhcmUgYWN0aXZlLiAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgUmV0cnVucyBhIGxpc3Qgb2YgdmFsaWQgZW1haWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgICAgICAgICAgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAKIy8JICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKZGVmIHZhbGlkYXRlRW1haWwoU0VSVkVSLHZhbGlkTHN0KToKICAgIGhvc3Q9U0VSVkVSCiAgICBlbWFpbFByb3A9Jy9ob21lL3BoZGZ0cHVzZXIvJXMvcHJvamVjdC9jb25maWcvRW1haWwucHJvcGVydGllcycgJShnX3Rlc3RfdmFyKQogICAgY29uZmlnID0gQ29uZmlnUGFyc2VyLlJhd0NvbmZpZ1BhcnNlcigpCiAgICBjb25maWcucmVhZChlbWFpbFByb3ApCiAgICBlbWFpbExzdD1jb25maWcuZ2V0KCdFbWFpbCBIZWFkZXInLCdlbWFpbC5pZCcpLnNwbGl0KCcsJykKICAgIHNlcnZlcj1zbXRwbGliLlNNVFAoKQogICAgc2VydmVyLnNldF9kZWJ1Z2xldmVsKDApCiAgICBzZXJ2ZXIuY29ubmVjdChob3N0KQogICAgc2VydmVyLmhlbG8oaG9zdCkKICAgIGZvciBpIGluIGVtYWlsTHN0OgogICAgICAgIHNlcnZlci5tYWlsKGkpCiAgICAgICAgY29kZSxtc2c9c2VydmVyLnJjcHQoc3RyKGkpKQogICAgICAgIGlmIGNvZGU9PTI1MDoKICAgICAgICAgICAgdmFsaWRMc3QuYXBwZW5kKGkpCiAgICBzZXJ2ZXIucXVpdCgpCiAgICByZXR1cm4gdmFsaWRMc3QKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgc2VuZEVycm9tYWlsIDogIFNlbmRzIHRoZSBlbWFpbCB0byB0aGUgbGlzdCBvZiBhY3RpdmUgdXNlcnMgd2l0aCB0aGUgRXJyb3IgYW5kIERlYnVnIGluZm9ybWF0aW9uLiAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLwkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgIFJldHJ1bnMgbm90aGluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgIAojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgCiMvCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiBzZW5kRXJyb21haWwoZXJySW5mbyxqb2IscHJvY2Vzcyk6CiAgICBwcmludCAnRW1haWwgU3RhcnRlZCcKICAgIHRvZGF5ID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuZGF0ZSgpCiAgICBTRVJWRVIgPSAibWFpbGhvc3Qud2FkZGVsbC5jb20iCiAgICBCT0RZPWVyckluZm8KICAgIGFkZHJlc3NfYm9vaz1bXQogICAgU1VCSkVDVD0nJwogICAgaWYgcHJvY2VzcyA9PSAnJzoKICAgIAlTVUJKRUNUPSdUYXNrZWQgRmFpbGVkIC0tICVzIGluIFBST0QgZm9yIHByb2Nlc3Mgb24gJXMnJShqb2Isc3RyKHRvZGF5KSkKICAgIGVsc2U6CglTVUJKRUNUPSdUYXNrZWQgRmFpbGVkIC0tICVzIGluIFBST0QgQCAlcyBvbiAlcyclKGpvYixwcm9jZXNzLHN0cih0b2RheSkpCiAgICBhZGRyZXNzX2Jvb2s9dmFsaWRhdGVFbWFpbChTRVJWRVIsYWRkcmVzc19ib29rKQogICAgRlJPTSA9ICJIREZTU3VwcG9ydFRlYW1Ad2FkZGVsbC5jb20iCiAgICBUTyA9ICcsJy5qb2luKGFkZHJlc3NfYm9vaykKICAgIG1zZyA9IE1JTUVNdWx0aXBhcnQoKQogICAgbXNnWydTdWJqZWN0J109IFNVQkpFQ1QKICAgIG1zZ1snRnJvbSddPSBGUk9NICAgIAogICAgbXNnWydUbyddID0gVE8JCiAgICBtc2cucHJlYW1ibGUgPSAnTXVsdGlwYXJ0IG1hc3NhZ2UuXG4nCiAgICBtc2cuYXR0YWNoKE1JTUVUZXh0KEJPRFksJ3BsYWluJykpICAgIAogICAgdHJ5OgoJc2VydmVyID0gc210cGxpYi5TTVRQKFNFUlZFUikKICAgIAlzZXJ2ZXIuc2VuZG1haWwoRlJPTSxhZGRyZXNzX2Jvb2ssbXNnLmFzX3N0cmluZygpKQoJcHJpbnQgJ01lc3NhZ2UgU2VudCcKICAgIGV4Y2VwdCBTTVRQRVhDRVBUSU9OOgoJcHJpbnQgIkVycm9yOiB1bmFibGUgdG8gc2VuZCBFcnJvciBlbWFpbCB3aXRoIGF0dGFjaG1lbnQiCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgIGdldENvbm4gOiBmZXRjaCB0aGUgcHJvcGVydHkgaW5mb3JtYXRpb24gZnJvbSB0aGUgY29uZmlndXJhdGlvbiBmaWxlIGFuZCByZXR1cm5zIC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8JUmV0cnVucyBob3N0LGRhdGFiYXNlLGhhZG9vcCBlbnZpcm9ubWVudCBsb2NhdGlvbiBhbmQgbmV0d29yayBkcml2ZSBlbnZpcm9ubWVudCBsb2NhdGlvbnMuICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCmRlZiBnZXRDb25uKCk6CiAgICBjb25uUHJvcD0nL2hvbWUvcGhkZnRwdXNlci8lcy9wcm9qZWN0L2NvbmZpZy9ob3N0LnByb3BlcnRpZXMnJShnX3Rlc3RfdmFyKQogICAgY29uZmlnID0gQ29uZmlnUGFyc2VyLlJhd0NvbmZpZ1BhcnNlcigpCiAgICBjb25maWcucmVhZChjb25uUHJvcCkKICAgIGNvbm5Mc3Q9Y29uZmlnLmdldCgnSG9zdCBQcm9wZXJ0eScsJ0hvc3QuaWQnKS5zcGxpdCgnLCcpCiAgICBjb25uTHN0PScsJy5qb2luKGNvbm5Mc3QpCiAgICByZXR1cm4gY29ubkxzdC5zcGxpdCgnLCcpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgcmVhZExheW91dCA6IFJlYWRzIHRoZSBqc29uIGxheW91dCBmb3IgZWFjaCBrZXkgYW5kIHJldHVybnMgdGhlIGtleXMgYW5kIHZhbHVlIGZvciB0aGUgZmxhZ3MuICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLwlSZXRydW5zIGtleXMgYW5kIHZhbHVlIGZvciB0aGUgZmxhZ3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgc2VxdWVuY2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlX2V4dCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgIHNlcV9pZGVudF9jaGFyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgIAojLyAgICAgICAgICAgICAgICAgICBzZWNfY29sX0ZsYWcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgCiMvCSAgICAgICAgICAgICByZWNvcmRfZmxhZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCgpkZWYgcmVhZExheW91dChsb2FkKToKICAgIHJlY29yZEZsdXNoID0gJycKICAgIHJlY29yZFNlcSA9IFtdCiAgICBmb2xsd19SY2RfQ2hhcnM9JycKICAgIHJlY29yZFNlcV9leHQgPSAnJwogICAgc2VjX29yZD0nJwogICAgZm9yIGtleSx2YWx1ZSBpbiBsb2FkLml0ZW1zKCk6CiAgICAgICAgZm9yIHYgaW4gdmFsdWU6CiAgICAgICAgICAgIGlmICJyZWNvcmRfZmxhZyIgaW4gdi5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiB2WyJyZWNvcmRfZmxhZyJdID09ICdUcnVlJyBhbmQgInNlY19jb2xfRmxhZyIgbm90IGluIHYua2V5cygpOgogICAgICAgICAgICAgICAgICAgIHJlY29yZEZsdXNoPWtleQogICAgICAgICAgICAgICAgaWYgInNlY19jb2xfRmxhZyIgaW4gdi5rZXlzKCkgYW5kIHZbInJlY29yZF9mbGFnIl0gPT0gJ1RydWUnOgogICAgICAgICAgICAgICAgICAgIHNlY19vcmQ9a2V5ICAgCiAgICAgICAgICAgIGlmICJzZXF1ZW5jZSIgaW4gdi5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiB2WyJzZXF1ZW5jZSJdID09ICdUcnVlJzoKICAgICAgICAgICAgICAgICAgICByZWNvcmRTZXEuYXBwZW5kKGtleSkKICAgICAgICAgICAgaWYgInNlcXVlbmNlX2V4dCIgaW4gdi5rZXlzKCk6CiAgICAgICAgICAgICAgICBpZiB2WyJzZXF1ZW5jZV9leHQiXSA9PSAnVHJ1ZSc6CiAgICAgICAgICAgICAgICAgICAgcmVjb3JkU2VxX2V4dD1rZXkKICAgICAgICAgICAgICAgICAgICBmb2xsd19SY2RfQ2hhcnM9dlsic2VxX2lkZW50X2NoYXIiXQogICAgcmV0dXJuIHJlY29yZEZsdXNoLHJlY29yZFNlcSxyZWNvcmRTZXFfZXh0LHNlY19vcmQsZm9sbHdfUmNkX0NoYXJzCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgcG9wdWxhdGVOdWxscyA6ICBwb3B1bGF0ZXMgbnVsbHMgZm9yIHRoZSByZWNvcmQgdGhhdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBpbnB1dCBmaWxlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgIFJldHVybnMgICBwaXBlIGRlbGltaXRlZCBudWxsIHN0cmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgpkZWYgcG9wdWxhdGVOdWxscyhpdGVtLGpzb25fbG9hZCk6CiAgICByZXMgPSAnJwogICAgZm9yIGkgaW4gcmFuZ2UgKDEsbGVuKGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJjb2x1bW5zIl1bMF1baXRlbV0uc3BsaXQoJ3wnKSkrMSk6CiAgICAgICAgcmVzID0gcmVzICsgJ251bGx8JwogICAgcmV0dXJuIHJlcwoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgIG1vdmVUb0hERlMgOiAgY29waWVzIHRoZSBwcm9jZXNzZWQgZmlsZSBmcm9tIHRoZSBuZXR3b3JrIHdpcCBkcml2ZSB0byBIREZTLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICBSZXR1cm5zICAgTm9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKZGVmIG1vdmVUb0hERlMocHJvZ0pvYlBhdGgsam9iTmFtZSx0YWJsZSxnX2hkcF9sb2MsbndfRHJpdmUpOgogICAgcHJpbnQgJ2VuZCB0aW1lJytzdHIoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpCiAgICBmbGVFeHN0PSIvJXMvJXMvJXMudHh0IiUoZ19oZHBfbG9jLGpvYk5hbWUsdGFibGUpCiAgICBwcmludCBmbGVFeHN0CiAgICByZXM9cm1ySGRmcyhmbGVFeHN0KQogICAgcHJpbnQgcmVzCiAgICBmbGVfb3V0TG9jPSIvJXMvJXMvd2lwLyVzLnR4dCIlKG53X0RyaXZlLHByb2dKb2JQYXRoLHRhYmxlKQogICAgcHJpbnQgZmxlX291dExvYwogICAgZmxlVG9IZHA9IiVzIC8lcy8lcy8iJShmbGVfb3V0TG9jLGdfaGRwX2xvYyxqb2JOYW1lKQogICAgcHJpbnQgZmxlVG9IZHAKICAgIHB1dEhkZnMoZmxlVG9IZHApCiAgICBvcy5yZW1vdmUoZmxlX291dExvYykKCgpkZWYgdGVzdEhkZnMoYWJzUHRoKToKICAgIGZsZUV4c3Q9ImhhZG9vcCBmcyAtdGVzdCAtZSAlcyIlKGFic1B0aCkKICAgIHJldHVybiBzdWJwcm9jZXNzLmNhbGwoZmxlRXhzdCxzaGVsbCA9IFRydWUpCmRlZiBybXJIZGZzKGFic1B0aCk6CiAgICAjZmxlRXhzdD0iaGFkb29wIGZzIC10ZXN0IC1lICVzIiUoYWJzUHRoKQogICAgcnRybmNkPXRlc3RIZGZzKGFic1B0aCkKICAgIGlmIGludChydHJuY2QpPT0wOgogICAgCWhhZG9vcGZzam9iID0gImhhZG9vcCBmcyAtcm1yICVzIiAlIChhYnNQdGgpCiAgICAJb3Muc3lzdGVtKGhhZG9vcGZzam9iKQogICAgcmV0dXJuIHJ0cm5jZAoKZGVmIGNhdEhkZnMoYWJzUHRoKToKICAgIGhhZG9vcEZzSm9iID0gImhhZG9vcCBmcyAtY2F0ICVzIiAlIChhYnNQdGgpCiAgICByc2x0U3QgPSBjb21tYW5kcy5nZXRvdXRwdXQoaGFkb29wRnNKb2IpCiAgICByZXR1cm4gcnNsdFN0CgpkZWYgcHV0SGRmcyhhYnNQdGgpOgogICAgIGZsZVRvSGRwPSJoZGZzIGRmcyAtcHV0ICVzIiUoYWJzUHRoKQogICAgIG9zLnN5c3RlbShmbGVUb0hkcCkKCmRlZiBmbGVDaGVjayhhYnNQdGgscHJjRmxlLG1vZGUpOgogICAgaWYgbW9kZT09J3InOgogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGFic1B0aCk6CiAgICAgICAgICAgIHByaW50ICIlcyBGaWxlIEV4aXN0cywgbG9hZGluZyB0aGUgZmlsZSIlKHByY0ZsZSkKICAgICAgICAgICAgZmxlMlJlYWQ9b3BlbihhYnNQdGgsbW9kZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAiVGhlICVzIHlvdSBsb2FkZWQgZG9lc24ndCBleGlzdCBpbiB0aGUgbG9jYXRpb24gcGxlYXNlIHJlY2hlY2sgdGhlIGxvY2F0aW9uIiUocHJjRmxlKQogICAgICAgICAgICBlcnJNc2c9IlRoZSAlcyB5b3UgbG9hZGVkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGxvY2F0aW9uIHBsZWFzZSByZWNoZWNrIHRoZSBsb2NhdGlvbiIgJShwcmNGbGUpCiAgICAgICAgICAgIGRlTXNnPSJQbGVhc2UgY2hlY2sgdGhlIGlmICVzIGV4aXN0cyBmb3IgdGhlIHByb2Nlc3MgaW4gdGhlIGxvY2F0aW9uIC0tICVzIiUocHJjRmxlLGFic1B0aCkKICAgICAgICAgICAgZm5sU3RyZz1lcnJNc2crJ1xuJytkZU1zZwogICAgICAgICAgICBzZW5kRXJyb21haWwoZm5sU3RyZywnJXMgZG9lc250IGV4c2lzdCclKHByY0ZsZSksJycpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoYWJzUHRoKSBhbmQgbW9kZT09J2ErJzoKICAgICAgICAgICAgICAgIGZsZTJSZWFkPW9wZW4oYWJzUHRoLG1vZGUpCiAgICAgICAgICAgIGVsaWYgb3MucGF0aC5pc2ZpbGUoYWJzUHRoKSBhbmQgbW9kZT09J3cnOgogICAgICAgICAgICAgICAgb3MucmVtb3ZlKGFic1B0aCkKICAgICAgICAgICAgICAgIGZsZTJSZWFkPW9wZW4oYWJzUHRoLG1vZGUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmbGUyUmVhZD1vcGVuKGFic1B0aCwndycpCiAgICAgICAgZXhjZXB0IElPRXJyb3IgYXMgZToKICAgICAgICAgICAgcHJpbnQgImNhbm5vdCBvcGVuIGZpbGUgKHswfSk6IHsxfSIuZm9ybWF0KGUuZXJybm8sIGUuc3RyZXJyb3IpCiAgICAgICAgICAgIGVyck1zZz0iY2Fubm90IG9wZW4gZmlsZSAoezB9KTogezF9Ii5mb3JtYXQoZS5lcnJubywgZS5zdHJlcnJvcikKICAgICAgICAgICAgZGVNc2c9IlBsZWFzZSBDaGVjayB0aGUgZmlsZXBhdGg6ICVzIiAlKGFic1B0aCkKICAgICAgICAgICAgZm5sU3RyZz1lcnJNc2crJ1xuJytkZU1zZwogICAgICAgICAgICBzZW5kRXJyb21haWwoZm5sU3RyZywnJXMgZG9lc250IGV4c2lzdCclKHByY0ZsZSksJycpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICByZXR1cm4gZmxlMlJlYWQKICAgIAoKZGVmIHRtZVN0bXBDaGVjayhmbGVTemVDaGssdHNPdXRwdXQsY3VyVFNUTXAsdGFibGUpOgogICAgaWYgZmxlU3plQ2hrPT1UcnVlOgogICAgICAgIHByaW50ICdUaW1lIGxvZyBpcyBlbXB0eScKICAgIGVsc2U6CiAgICAgICAgZm9yIGR0ZSBpbiB0c091dHB1dDoKICAgICAgICAgICAgaWYgY3VyVFNUTXA9PWR0ZS5zdHJpcCgpOgogICAgICAgICAgICAgICBwcmludCAnUHJvY2VzcyAlcyclKHRhYmxlKQogICAgICAgICAgICAgICBwcmludCAnVGhpcyBmaWxlIHdhcyBhbHJlYWR5IHByb2Nlc3NlZCBmb3IgdGltZXN0YW1wIGluIGxvZ3MgJXMscHJvZ3JhbSBleGl0aW5nJyUoY3VyVFNUTXApCiAgICAgICAgICAgICAgIGVyck1zZz0iVGhpcyBmaWxlIHdhcyBhbHJlYWR5IHByb2Nlc3NlZCBmb3IgdGltZXN0YW1wIGluIGxvZ3MgLSVzLHByb2dyYW0gZXhpdGluZyBAICVzICIgJShjdXJUU1RNcCxzdHIoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpKQoJICAgICAgIGRlTXNnPSJQbGVhc2UgY2hlY2sgdGhlIGlucHV0IGZpbGUgcGFzc2VkIiAgCgkgICAgICAgZm5sU3RyZz1lcnJNc2crJ1xuJytkZU1zZwoJICAgICAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCdJbnB1dCBGaWxlIFBhcnNlZCBBbHJlYWR5Jyx0YWJsZSkKICAgICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgIHJldHVybiAnVGltZXN0YW1wIENoZWNrIGNvbXBsZXRlZCcKICAgICAgICAgCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgZmx1c2hPdXRwdXQgOiAgZmx1c2ggZWFjaCBvZiB0aGUgcmVjb3JkcyBpbiB0aGUgZGljdGlvbmFyaWVzW2RpY3Qsc2VxRGljdF0gaW50byBvdXRwdXQgZmlsZS4gICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICBOb3RlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBXaGVuZXZlciB0aGVyZSBhcmUgcmVjb3JkcyBpbiB0aGUgc2VxRGljdCAsd2hpbGUgbG9vcCBleGVjdXRlcyB0aWxsIGNudHIgaXMgbGVzcyB0aGFuIGxlbmd0aCBvZiBzZXFEaWN0LiAgICAgICAgICAvIwojLyAgICAgICAgVGhpcyBtZXRob2Qgd2lsbCBjYWxsIHBvcHVsYXRlTnVsbHMoKSBtZXRob2QgdG8gcG9wdWxhdGUgbnVsbHMgZm9yIHRoZSBrZXlzIHRoYXQgZG9lc24ndCBleGlzdCBpbiBkaWN0aW9uYXJpZXMuICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBSZXR1cm5zIHJlc19jbnQgZm9yIHRoZSBjb3VudCBkZWJ1Z2dpbmcgcHVycG9zZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCgoKZGVmIGZsdXNoT3V0cHV0KGFzX29mX2R0LGJ1c19mbGFnLGRpY3Qsc2VxRGljdCxzZXFfZXh0LHJlc19jbnQsanNvbl9sb2FkLHNlcSxvcCxwcm9jX2lkLGluc3J0X3RzLHNlY19vcmQscmVjX2lkLHJlY19pZF9mbCk6CiAgICBvdXRwdXQgPSAnJwogICAgaWYgc2VjX29yZCBpbiBkaWN0LmtleXMoKToKICAgIAljb2xfb3JkZXI9anNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bInNlY19jb2xfb3JkZXIiXQogICAgZWxzZToKICAgICAgICBjb2xfb3JkZXI9anNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImNvbF9vcmRlciJdCiAgICBjbnQsbGVudCA9MSwxCiAgICBpZiBib29sKHNlcURpY3QpOgogICAgCWZvciBpIGluIHNlcURpY3Qua2V5cygpOgogICAgICAgICAgICBpZiBsZW50PT1pbnQoaS5zcGxpdCgnXycpWzFdKToKICAgICAgICAgICAgICAgbGVudD1sZW50CiAgICAgICAgICAgIGVsaWYgbGVudDxpbnQoaS5zcGxpdCgnXycpWzFdKToKICAgICAgICAgICAgICAgbGVudD1pbnQoaS5zcGxpdCgnXycpWzFdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICBsZW50PWxlbnQKICAgIHdoaWxlIFRydWU6CglvdXRwdXQgPSAnJwogICAgICAgIGlmIGNudCA+IGxlbnQ6IAogICAgICAgICAgICBicmVhawogICAgICAgIGZvciBjb2xzIGluIGNvbF9vcmRlcjoKCSAgICBpZiBjb2xzIGluIGRpY3Qua2V5cygpIDoKICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIGRpY3RbY29sc10KICAgICAgICAgICAgZWxpZiBjb2xzIGluIHNlcToKICAgICAgICAgICAgICAgIGlmIGNvbHMrJ18nK3N0cihjbnQpIGluIHNlcURpY3Qua2V5cygpOiAKICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIHNlcURpY3RbY29scysnXycrc3RyKGNudCldCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgcG9wdWxhdGVOdWxscyhjb2xzLGpzb25fbG9hZCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIHBvcHVsYXRlTnVsbHMoY29scyxqc29uX2xvYWQpCiAgICAgICAgY250ID0gY250KzEKICAgICAgICByZWNfaWQ9cmVjX2lkKzEKICAgICAgICBpZiBidXNfZmxhZz09J1RydWUnOgogICAgICAgICAgIGlmIHJlY19pZF9mbD09J1RydWUnOgoJICAgICAgb3V0cHV0ID0gc3RyKHJlY19pZCkrJ3wnK2FzX29mX2R0Kyd8JytvdXRwdXQgKyBwcm9jX2lkICsgJ3wnICsgaW5zcnRfdHMgKydcbicKICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgIG91dHB1dCA9IGFzX29mX2R0Kyd8JytvdXRwdXQgKyBwcm9jX2lkICsgJ3wnICsgaW5zcnRfdHMgKydcbicKICAgICAgICBlbHNlOgogICAgICAgICAgIG91dHB1dD1vdXRwdXQgKyBwcm9jX2lkICsgJ3wnICsgaW5zcnRfdHMgKydcbicKICAgICAgICBvcC53cml0ZShvdXRwdXQpCiAgICAgICAgcmVzX2NudCA9IHJlc19jbnQgKyAxCiAgICAKICAgIHJldHVybiByZXNfY250LHJlY19pZAoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgIHBhcnNlTGluZSA6IFRoaXMgbWV0aG9kIHdpbGwgdGFrZSB0aGUgaW5wdXQgbGluZSBhbmQgcGFyc2Ugd2l0aCByZXNwZWN0aXZlIHRvIHRoZSBqc29uIGxheW91dCAuICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgTm90ZTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgVGhpcyBtZXRob2QgaXRlcmF0ZXMgb3ZlciB0aGUgY29sdW1ucyBwZXIga2V5IGluIHRoZSBqc29uIGxheW91dCBhbmQgcGFyc2VzIG91dCB0aGUgcG9zaXRpb25zIGFuZCBkYXRhIHR5cGUgICAgICAgLyMKIy8gICAgICAgIG9mIGVhY2ggY29sdW1uIGFuZCBvcmdhbml6ZSB0aGUgaW5wdXQgbGluZSBpbnRvIHBpcGUgZGVsaW1pdGVkIGZvcm1hdHRlZCByb3cuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgIFJldHVybnMgZm9ybWF0dGVkIHN0cmluZyBvZiB0aGUgaW5wdXQgbGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICB2LjAxIHVwZGF0ZWQgdGhlIGNvZGUgdG8gaGFuZGxlIHRoZSBkaWZmZXJlbnQgZGF0ZSBmb3JtYXRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiAgICAKZGVmIHBhcnNlTGluZShpdGVtLGxpbmUsanNvbl9sb2FkKToKICAgIHJlc19zdCA9ICcnCiAgICB0cmltX2NrID0gRmFsc2UKICAgIGZvciB2YWwgaW4ganNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImNvbHVtbnMiXVswXVtpdGVtXS5zcGxpdCgnfCcpOgogICAgICAgIHN0ID0gJycKCWlmIGxlbihqc29uX2xvYWRbaXRlbV1bMF1bImF0dHJpYiJdW3ZhbF1bMF0uc3BsaXQoJywnKSkgPiAzOgoJICAgIHN0YXJ0LGVuZCxkYXRhX3R5cGUsdCA9IGpzb25fbG9hZFtpdGVtXVswXVsiYXR0cmliIl1bdmFsXVswXS5zcGxpdCgnLCcpCgkgICAgaWYgdCA9PSAnc3RyaXAoKSc6CgkJdHJpbV9jayA9IFRydWUKCWVsc2U6ICAgICAgIAoJICAgIHN0YXJ0LGVuZCxkYXRhX3R5cGUgPSBqc29uX2xvYWRbaXRlbV1bMF1bImF0dHJpYiJdW3ZhbF1bMF0uc3BsaXQoJywnKQogICAgICAgIAogICAgICAgIGlmIGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKSA9PSAnJzoKICAgICAgICAgICAgc3QgPSAnbnVsbCcKICAgICAgICBlbGlmIGRhdGFfdHlwZSBpbiAoJyVtJWQlWScsJyVZJW0lZCcsJyV5JW0lZCcsJyVZJWonLCclbSVkJXknLCclbS8lZC8lWScpOgogICAgICAgICAgICBkeW5fWmVyb19mbHI9JzAnCiAgICAgICAgICAgIGZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCiAgICAgICAgICAgIGlmIGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKSE9ZHluX1plcm9fZmxyLnpmaWxsKGxlbihsaW5lW2ludChzdGFydCk6aW50KGVuZCldLnN0cmlwKCkpKSBhbmQgbGluZVtpbnQoc3RhcnQpOmludChzdGFydCkrNF0uc3RyaXAoKSE9JzAwMDAnOiNkeW5fWmVyb19mbHIuemZpbGwoaW50KGVuZCktaW50KHN0YXJ0KSk6CiAgICAgICAgICAgIAlzdCA9ICBzdHIoZGF0ZXRpbWUuc3RycHRpbWUobGluZVtpbnQoc3RhcnQpOmludChlbmQpXSxkYXRhX3R5cGUpLmRhdGUoKSkgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc3Q9J251bGwnCiAgICAgICAgZWxpZiBkYXRhX3R5cGUgPT0gJ2ludCc6CiAgICAgICAgICAgIGlmIGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKSE9Jyc6CiAgICAgICAgICAgIAlzdCA9IGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0uc3RyaXAoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc3Q9bnVsbAogICAgICAgIGVsaWYgZGF0YV90eXBlLnN0YXJ0c3dpdGgoJ2RlY2ltYWwnKToKICAgICAgICAgICAgcHJlLHNjYSA9IGRhdGFfdHlwZS5zcGxpdCgnKCcpWzFdLnNwbGl0KCd8JykKICAgICAgICAgICAgc2NhID0gaW50KHNjYS5yZXBsYWNlKCcpJywnJykpCiAgICAgICAgICAgIGlmIGxlbihsaW5lW2ludChzdGFydCk6aW50KGVuZCldKSA8IGludChwcmUpOgogICAgICAgICAgICAgICAgc3Q9bGluZVtpbnQoc3RhcnQpOmludChlbmQpXS56ZmlsbChpbnQocHJlKSkKICAgICAgICAgICAgc3QgPSBsaW5lW2ludChzdGFydCk6aW50KGVuZCktc2NhXSArJy4nICtsaW5lW2ludChlbmQpLXNjYTppbnQoZW5kKV0KICAgICAgICBlbGlmIGRhdGFfdHlwZSA9PSAnbnVsbCc6CiAgICAgICAgICAgIHN0PSdudWxsJwogICAgICAgIGVsaWYgZGF0YV90eXBlLnN0YXJ0c3dpdGgoJ1NkZWNpbWFsJyk6CiAgICAgICAgICAgIHByZSxzY2EgPSBkYXRhX3R5cGUuc3BsaXQoJygnKVsxXS5zcGxpdCgnfCcpCiAgICAgICAgICAgIHNjYSA9IGludChzY2EucmVwbGFjZSgnKScsJycpKQogICAgICAgICAgICBpbnRyX1Jlc2x0PWxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0KICAgICAgICAgICAgc3BjbF9DaHI9cmUuZmluZGFsbChyJ1teMC05Ol0nLGludHJfUmVzbHQpCiAgICAgICAgICAgIGZvciBjaHIgaW4gc3BjbF9DaHI6CiAgICAgICAgICAgICAgICBpbmR4PWludHJfUmVzbHQuaW5kZXgoY2hyKQogICAgICAgICAgICAgICAgY2hyX0NvbnY9Y2hyLmVuY29kZSgnY3AxMTQwJykuZW5jb2RlKCJoZXgiKQogICAgICAgICAgICAgICAgaWYgY2hyX0NvbnZbMDoxXT09J2MnOgogICAgICAgICAgICAgICAgICAgIGludHJfUmVzbHQ9aW50cl9SZXNsdC5yZXBsYWNlKGNocixjaHJfQ29udlstMV0pCiAgICAgICAgICAgICAgICAgICAgaW50cl9SZXNsdD0nKycraW50cl9SZXNsdFswOmludChwcmUpLXNjYV0rJy4nK2ludHJfUmVzbHRbaW50KHByZSktc2NhOl0KICAgICAgICAgICAgICAgIGVsaWYgY2hyX0NvbnZbMDoxXT09J2QnOgogICAgICAgICAgICAgICAgICAgIGludHJfUmVzbHQ9aW50cl9SZXNsdC5yZXBsYWNlKGNocixjaHJfQ29udlstMV0pCiAgICAgICAgICAgICAgICAgICAgaW50cl9SZXNsdD0nLScraW50cl9SZXNsdFswOmludChwcmUpLXNjYV0rJy4nK2ludHJfUmVzbHRbaW50KHByZSktc2NhOl0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaW50cl9SZXNsdD1pbnRyX1Jlc2x0LnJlcGxhY2UoY2hyLGNocl9Db252Wy0xXSkKICAgICAgICAgICAgICAgICAgICBpbnRyX1Jlc2x0PWludHJfUmVzbHRbMDppbnQocHJlKS1zY2FdKycuJytpbnRyX1Jlc2x0W2ludChwcmUpLXNjYTpdCiAgICAgICAgICAgIHN0ID0gaW50cl9SZXNsdAogICAgICAgICAgICAKICAgICAgICBlbHNlOgogICAgICAgICAgICBzdCA9IGxpbmVbaW50KHN0YXJ0KTppbnQoZW5kKV0ucmVwbGFjZSgnXHgwMCcsJyAnKS5yZXBsYWNlKCd8JywnJykucmVwbGFjZSgnXFwnLCdcXFxcJykuc3RyaXAoKQoKCWlmIHRyaW1fY2s6CgkgICAgZXhlYyAic3QgPSAnJXMnLiVzIiAlKHN0LHQpCgkgICAgdHJpbV9jayA9IEZhbHNlCiAgICAgICAgcmVzX3N0ID0gcmVzX3N0ICsgc3QgKyd8JyAKICAgIHJldHVybiByZXNfc3QKCgoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgIHByb2Nlc3MgOiBUaGlzIG1ldGhvZCBpcyB0aGUgZGVjaXNpb24gbWFrZXIgYW5kIGNvcmUgb2YgdGhpcyBwcm9ncmFtIGl0IHdpbGwgaWRlbnRpZnkgdGhlIGxpbmVzIHRoYXQgbmVlZHMgdG8gICAgICAgLyMKIy8gICAgICAgICAgICAgICAgYmUgaWdub3JlZCBhbmQgZmx1c2ggdGhlIHJlc3VsdCBzZXQgcHJvY2Vzc2VkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgTm90ZTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgVGhpcyBtZXRob2QgaGF2ZSBhbGwgdGhlIGRpY3Rpb2FucmllcyBpbml0aWFsaXphdGlvbiB0byBrZWVwIHRoZSByZWNvcmQgc2V0IHRoYXQgbmVlZHMgdG8gYmUgZmx1c2hlZCBldmVyeSB0aW1lICAgLyMKIy8gICAgICAgIGl0IHNlZXMgdGhlIGZsdXNoIGl0ZW0gKHdoaWNoIG1lYW4gc3RhcnQgb2YgdGhlIHJlY29yZCBzZXQgW0NJQSxDSUIsQ0lDXSxbQ0lBLENJQl0gd2hpY2ggaXMgIkNJQSIgaW4gdGhpcyBjYXNlKS4gIC8jCiMvICAgICAgICBMaW5lIzM0MyA6IFRoaXMgbWV0aG9kIGhhcyB0aGUgbG9naWMgdG8gaWRlbnRpZnkgdGhlIHNlcXVlbmNlIGZsYWcgZW5hYmxlZCBrZXlzIGFuZCByb3V0ZSB0aGVtICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICBhcHByb3ByaWF0ZSBoYW5kbGluZyBwcm9jZXNzLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgIFRoZXJlIGFyZSBtYW55IGZsYWdzIHRoYXQgd2lsbCBoZWxwIHRoZSBzY3JpcHQgdG8gbmF2aWdhdGUgdGhlIGxpbmUgdG8gcGFyc2VMaW5lIG1ldGhvZCBmb3IgZnVydGhlciAgICAgICAgICAgICAgIC8jCiMvICAgICAgICB0cmFuc2Zvcm1hdGlvbnMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgVGhpcyBtZXRob2Qgd2lsbCBjYWxsIHRoZSBwYXJzZUxpbmUgYW5kIGZsdXNoIG1ldGhvZCB0byB0cmFuc2Zvcm0gYW5kIHRoZSBwdXNoIHRoZSBsaW5lIHRvIG91dHB1dCBmaWxlLiAgICAgICAgICAgLyMKIy8gICAgICAgICJtdWxfc2VxX0NudCIgd2lsbCBzdG9yZSB0aGUgY250ciBmb3IgdGhlIGtleSBpbiBjYXNlIG9mIHNlcXVlbmNlICBhbmQgdXBkYXRlIGZvciBlYWNoIG9jY3VyZW5jZSBvZiB0aGUga2V5ICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgICAgICAgICAgIAojLyAgICAgUmV0dXJucyAgdGhlIGNvdW50IG9mIGxpbmVzIHdyaXR0ZW4gdG8gdGhlIGZpbGUgYW5kIHRpbWVzdGFtcCBmcm9tIGZpbGUgZm9yIGxvZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKCgpkZWYgcHJvY2Vzcyhqc29uX2xvYWQsaW5wLG9wLHRzT3V0cHV0LGZsZVN6ZUNoayx0YWJsZSk6CiAgICAKICAgIGZsdXNoLHNlcSxzZXFfZXh0LHNlY19vcmQsZm9sbHdfUmNkX0NoYXJzID0gcmVhZExheW91dChqc29uX2xvYWQpCiAgICBwcmludCBmbHVzaCxzZXEsc2VxX2V4dCxzZWNfb3JkLGZvbGx3X1JjZF9DaGFycwogICAgY250LHNlcV9jbnQscmVzX2NudCxyZWNfaWQ9MCwwLDAsMAogICAgcHJvY19pZD1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsiaGRmc19wcm9jX2lkIl0KICAgIGluc3J0X3RzID0gc3RyKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKQogICAgYXNfb2ZfZHQ9JycKICAgIGJ1c19mbGFnPSdGYWxzZScKICAgIGlmICJidXNfcHJvY19kdCIgaW4ganNvbl9sb2FkWyJkYl9wcm9wIl1bMF0ua2V5cygpOgoJYnVzX2ZsYWc9anNvbl9sb2FkWyJkYl9wcm9wIl1bMF1bImJ1c19wcm9jX2R0Il0KICAgIHJlY19pZF9mbD0nRmFsc2UnCiAgICBtdWxfc2VxX0NudD17fQogICAgZGZsdF9LZXk9JycKICAgIGxlbl9vZl9sbmU9aW50KGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJsZW5fb2ZfbG5lIl0pCiAgICBsc1BvcyxsZVBvcz1qc29uX2xvYWRbImRiX3Byb3AiXVswXVsibGluZV9kZWZhdWx0X2NoYXIiXVswXS5zcGxpdCgnLCcpCiAgICBmcnN0RGljdCxzZXFEaWN0PXt9LHt9CiAgICBoZHJMbmUsc1BvcyxlUG9zPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJ0c192YWxpZCJdWzBdLnNwbGl0KCcsJykKICAgIHRyTHI9anNvbl9sb2FkWyJUcmFpbGVyIl1bMF1bIlNlcSJdCiAgICBwcmludCAnc3RhcnQgdGltZScrc3RyKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKQogICAgaXNQb3MsaWVQb3M9MCwwCiAgICBpdGVtLHJlY3JkX2V4dD0nJywnJwogICAgZm9yIGxpbmUgaW4gaW5wOgogICAgICAgIHVuaV9DaHI9cmUuZmluZGFsbChyJ1teXHgwMC1ceDdGXScsbGluZSkKICAgICAgICBpZiBsZW4odW5pX0NocikhPTA6IAogICAgICAgICAgICBmb3IgY2hyIGluIHVuaV9DaHI6CgkgICAgICAgIGNocl9JbmR4PWxpbmUuaW5kZXgoY2hyKQogICAgICAgICAgICAgICAgbGluZT0nJy5qb2luKGxpbmVbMDpjaHJfSW5keF0rJyAnK2xpbmVbY2hyX0luZHgrMTpdKQogICAgICAgIAogICAgICAgIGlmICdub19yZWNfdHlwJyBpbiBqc29uX2xvYWRbImRiX3Byb3AiXVswXS5rZXlzKCkgYW5kIG5vdCBsaW5lLnN0YXJ0c3dpdGgoaGRyTG5lKSBhbmQgbm90IGxpbmUuc3RhcnRzd2l0aCh0ckxyKToKICAgCQlkZmx0X0tleT1mbHVzaAogICAgICAgIGxpbmU9bGluZS5yc3RyaXAoKS5sanVzdChsZW5fb2ZfbG5lKStkZmx0X0tleQogICAgICAgIGlmIGxpbmUuc3RhcnRzd2l0aChoZHJMbmUpOgogICAgICAgICAgIHRpbWVTdGFtcD1saW5lW2ludChzUG9zKTppbnQoZVBvcyldLnN0cmlwKCkKICAgICAgICAgICB0c0NoZWNrPXRtZVN0bXBDaGVjayhmbGVTemVDaGssdHNPdXRwdXQsdGltZVN0YW1wLHRhYmxlKQogICAgICAgICAgIAogICAgICAgIGlmIGJ1c19mbGFnPT0nVHJ1ZSc6CgkgICBsbmUsc3RydF9kdCxlbmRfZHQscmVjX2lkX2ZsPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJhc19vZl9kdCJdWzBdLnNwbGl0KCcsJykKICAgICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgobG5lKToKICAgICAgICAgICAgICBpZiAoaW50KGVuZF9kdCktaW50KHN0cnRfZHQpKT09ODoKICAgICAgICAgICAgICAJIGFzX29mX2R0PWxpbmVbaW50KHN0cnRfZHQpOmludChzdHJ0X2R0KSs0XSsnLScrbGluZVtpbnQoc3RydF9kdCkrNDppbnQoc3RydF9kdCkrNl0rJy0nK2xpbmVbaW50KHN0cnRfZHQpKzY6aW50KGVuZF9kdCldCiAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICBhc19vZl9kdD1saW5lW2ludChlbmRfZHQpLTQ6aW50KGVuZF9kdCldKyctJytsaW5lW2ludChzdHJ0X2R0KTppbnQoc3RydF9kdCkrMl0rJy0nK2xpbmVbaW50KHN0cnRfZHQpKzM6aW50KHN0cnRfZHQpKzVdCiAgICAgICAgcmVjcmRfZXh0PWxpbmVbaW50KGxzUG9zKTppbnQobGVQb3MpXStsaW5lW2ludChpc1Bvcyk6aW50KGllUG9zKV0KICAgICAgICBpZiAoKChsaW5lLnN0YXJ0c3dpdGgoZmx1c2gpIG9yIGxpbmVbaW50KGxzUG9zKTppbnQobGVQb3MpXT09Zmx1c2ggb3IgcmVjcmRfZXh0PT1mbHVzaCkgb3IgKGxpbmUuc3RhcnRzd2l0aChzZWNfb3JkKSBhbmQgc2VjX29yZCE9JycpKSBvciAobGluZS5zdGFydHN3aXRoKHRyTHIpIG9yIHRyTHI9PSdkZWZhdWx0JykpIGFuZCBjbnQhPTA6CiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGZyc3REaWN0LmtleXMoKSkhPTA6IAogICAgICAgICAgICAgICAgICAgICAgIHJlc19jbnQscmVjX2lkID0gZmx1c2hPdXRwdXQoYXNfb2ZfZHQsYnVzX2ZsYWcsZnJzdERpY3Qsc2VxRGljdCxzZXFfZXh0LHJlc19jbnQsanNvbl9sb2FkLHNlcSxvcCxwcm9jX2lkLGluc3J0X3RzLHNlY19vcmQscmVjX2lkLHJlY19pZF9mbCkKICAgICAgICAgICAgICAgICAgICAgICBmcnN0RGljdCxzZXFEaWN0PXt9LHt9CiAgICAgICAgICAgICAgICAgICAgICAgbXVsX3NlcV9DbnQ9e30gICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgbGluZS5zdGFydHN3aXRoKHRyTHIpOgogICAgICAgICAgICAgICAgICAgICAgIGNudCxyZWNfaWQ9MCwwCiAgICAgICAgICAgIAogICAgICAgIGlmICBsaW5lW2ludChsc1Bvcyk6aW50KGxlUG9zKV0gaW4ganNvbl9sb2FkLmtleXMoKToKICAgICAgICAgICAgaXRlbT1saW5lW2ludChsc1Bvcyk6aW50KGxlUG9zKV0KICAgICAgICAgICAgaWYgInNlcV9pZGVudF9GTGciIGluIGpzb25fbG9hZFtpdGVtXVswXS5rZXlzKCk6CiAgICAgICAgICAgICAgIGlzUG9zLGllUG9zPWpzb25fbG9hZFtpdGVtXVswXVsic2VxX2lkZW50X3BvcyJdWzBdLnNwbGl0KCcsJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlzUG9zLGllUG9zPTAsMAogICAgICAgICAgICBpZiBsaW5lW2ludChsc1Bvcyk6aW50KGxlUG9zKV0rbGluZVtpbnQoaXNQb3MpOmludChpZVBvcyldIGluIGpzb25fbG9hZC5rZXlzKCk6CiAgICAgICAgICAgICAgICBpdGVtPWxpbmVbaW50KGxzUG9zKTppbnQobGVQb3MpXStsaW5lW2ludChpc1Bvcyk6aW50KGllUG9zKV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGl0ZW09aXRlbQogICAgICAgICAgICBpZiBsZW4oc2VxKT09MCBhbmQgImF0dHJpYiIgaW4ganNvbl9sb2FkW2l0ZW1dWzBdLmtleXMoKToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcnNlTGluZShpdGVtLGxpbmUsanNvbl9sb2FkKQogICAgICAgICAgICBpZiBsZW4oc2VxKSE9MCBhbmQgaXRlbSBub3QgaW4gc2VxIDoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcnNlTGluZShpdGVtLGxpbmUsanNvbl9sb2FkKQogICAgICAgICAgICBpZiBpdGVtIGluIHNlcToKICAgICAgICAgICAgICAgIGlDaGFycz1qc29uX2xvYWRbaXRlbV1bMF1bInNlcV9pZGVudF9jaGFyIl0KICAgICAgICAgICAgICAgIGlmIGxpbmVbaW50KGlzUG9zKTppbnQoaWVQb3MpXS5zdHJpcCgpIGluIGlDaGFycyBvciAnZGVmYXVsdCcgaW4gaUNoYXJzOgogICAgICAgICAgICAgICAgICAgIGlmIGl0ZW0gbm90IGluIG11bF9zZXFfQ250OgogICAgICAgICAgICAgICAgICAgICAgICBtdWxfc2VxX0NudFtpdGVtXT0wCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VMaW5lKGl0ZW0sbGluZSxqc29uX2xvYWQpCiAgICAgICAgICAgICAgICAgICAgbXVsX3NlcV9DbnRbaXRlbV09bXVsX3NlcV9DbnRbaXRlbV0rMSAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGxpbmVbaW50KGlzUG9zKTppbnQoaWVQb3MpXS5zdHJpcCgpIGluIGlDaGFycyBvciAnZGVmYXVsdCcgaW4gaUNoYXJzOgogICAgICAgICAgICAgICAgICAgIHNlcURpY3RbaXRlbSsnXycrc3RyKG11bF9zZXFfQ250W2l0ZW1dKV09cmVzdWx0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAiYXR0cmliIiBpbiBqc29uX2xvYWRbaXRlbV1bMF0ua2V5cygpOgogICAgICAgICAgICAgICAgICAgIGlmICJtdWxfcmVjcmRfZnJtdCIgaW4ganNvbl9sb2FkW2l0ZW1dWzBdLmtleXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgZnJzdERpY3RbaXRlbVtpbnQobHNQb3MpOmludChsZVBvcyldXT1yZXN1bHQKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBmcnN0RGljdFtpdGVtXT1yZXN1bHQgIAogICAgICAgICAgICBpZiAgZmx1c2g9PWl0ZW06CiAgICAgICAgICAgICAgICBjbnQ9Y250KzEKICAgIHJldHVybiByZXNfY250LHRpbWVTdGFtcAoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgcGlncHJvY2VzcyA6IFRoaXMgcHJvY2VzcyBpcyBjYWxsZWQgZm9yIHRoZSBpbnB1dCB0aGF0IGhhcyBzaW5nbGUgcmVjb3JkIHR5cGUgYW5kIGlzIG1vcmUgdGhhbiBhIGdpZ2FieXRlLHRoZSBpbnB1dCAvIwojLyAgICAgICAgICAgICAgICBpcyBjb3BpZWQgdG8gSERGUyBsb2NhdGlvbiBmaXJzdCBhbmQgdXNlcyBwaWcgdG8gcHJvY2VzcyB0aGUgZmlsZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICBOb3RlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBUaGlzIG1ldGhvZCB3aWxsIGNyZWF0ZSBwaWdzY3JpcHRzIGluIHRoZSBlbnZpcm9ubWVudChkZXYsdGVzdC4uZXRjKSBwcm9qZWN0Lzxwcm9qZWN0IG5hbWU+L3BpZ3NjcmlwdC9mb2xkZXIgd2l0aCAvIwojLyAgICAgICAgdGhlIGFwcHJvcHJpYXRlIHNjcmlwdCB3aXRoIG5lY2Vzc2FyeSBwYXJhbWV0ZXJzIGxpa2UgbWFwcGluZyB3aWxsIGJlIHdyaXR0ZW4gdG8gdGhpcyBzY3JpcHRzLiAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBUaGVyZSBpcyBweXVkZihwYXJzZS5weSkgZGV2ZWxvcGVkIGZvciB0aGlzIHByb2Nlc3MgdW5kZXIgKC88ZW52aXJvbm1lbnQ+L3Byb2plY3QvZnJhbWV3b3JrLykgdGhhdCB0YWtlcyBtYXBwaW5nICAvIwojLyAgICAgICAgYXMgcGFyYW1ldGVyIGZyb20gdGhlIHNjcmlwdCBhbmQgcGFzcyBpdCB0byB0aGUgdWRmIHRvIHJldHVybiBhIGZvcm1hdHRlZCBzdHJpbmcuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICBUaGVyZSBhcmUgMiBwaWdzY3JpcHRzIGludm9sdmVkIGluIHRoaXMgcHJvY2VzcyAsdGhlIGZpcnN0IHdpbGwgZmV0Y2ggdGhlIGFzX29mX2R0IGZyb20gdGhlIGZpbGUgYW5kIHJldHVybiB0byBhICAvIwojLyAgICAgICAgZmlsZS5UaGUgbGF0ZXIgc2NyaXB0IHdpbGwgc2VuZCB1bmZvcm1hdHRlZCBsaW5lcyB0byBweXVkZiB0byBkbyBkYXRhIGNsZWFuc2luZyBhbmQgcmV0dXJucyBhIGZvcm1hdHRlZCBsaW5lICAgICAgLyMKIy8gICAgICAgIHdpdGggZGF0ZSBmcm9tIHRoZSBwcmV2aW91cyBwaWcgc2NyaXB0IHJlc3VsdCBhcHBlbmRlZCB0byBpdC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgICAgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgUmV0dXJucyAgdGhlIGNvdW50IG9mIGxpbmVzIHdyaXR0ZW4gdG8gdGhlIGZpbGUgYW5kIHRpbWVzdGFtcCBmcm9tIGZpbGUgZm9yIGxvZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgpkZWYgcGlncHJvY2Vzcyhqc29uX2xvYWQsaW5wLGpvYk5hbWUsZmxlTm1lLGZsZV9ubV9TcGx0LGZsZVN6ZUNoayx0c091dHB1dCx0YWJsZSxnX2hkcF9sb2MpOgogICAgZmx1c2gsc2VxLHNlcV9leHQsc2VjX29yZCxmb2xsd19SY2RfQ2hhcnMgPSByZWFkTGF5b3V0KGpzb25fbG9hZCkKICAgIG1hcExzdD0nJwogICAgZm9yIGkgaW4ganNvbl9sb2FkWydkYl9wcm9wJ11bMF1bJ2NvbHVtbnMnXVswXVtmbHVzaF0uc3BsaXQoJ3wnKToKICAgICAgICBtYXBMc3QrPXN0cihqc29uX2xvYWRbZmx1c2hdWzBdWydhdHRyaWInXVtpXSkrJ3x8JwogICAgbWFwTHN0PW1hcExzdC5yZXBsYWNlKCInIiwnJykucmVwbGFjZSgndScsJycpCiAgICBwcmludCAnbWFwTHN0IHN0cmluZyBpcycsbWFwTHN0CiAgICBsZW5fb2ZfbG5lPWludChqc29uX2xvYWRbJ2RiX3Byb3AnXVswXVsibGVuX29mX2xuZSJdKQogICAgcHJvY0lkPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJoZGZzX3Byb2NfaWQiXQogICAgaW5zcnRfdHMgPSBzdHIoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpCiAgICBpZiBqc29uX2xvYWRbImRiX3Byb3AiXVswXVsiYnVzX3Byb2NfZHQiXT09J1RydWUnOgogICAgICAgIGFzX29mX2R0PXN0cihqc29uX2xvYWRbImRiX3Byb3AiXVswXVsiYXNfb2ZfZHQiXSkucmVwbGFjZSgiJyIsJycpLnJlcGxhY2UoJ3UnLCcnKQogICAgZWxzZToKICAgICAgICBhc19vZl9kdD0nJwogICAgI3ByaW50ICdhc19vZl9kdCBiZWZvcmUgdHJhbnNmb3JtYXRpb24nLGFzX29mX2R0CiAgICBoTG5lPWFzX29mX2R0LnJlcGxhY2UoJ1snLCcnKS5yZXBsYWNlKCddJywnJykucmVwbGFjZSgndScsJycpLnNwbGl0KCcsJylbMF0KICAgIHRMbmU9anNvbl9sb2FkWyJUcmFpbGVyIl1bMF1bIlNlcSJdCiAgICB0c1N0bXA9c3RyKGpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJ0c192YWxpZCJdKS5yZXBsYWNlKCInIiwnJykucmVwbGFjZSgndScsJycpCiAgICAjcHJpbnQgJ2FzX29mX2R0IGFmdGVyIHRyYW5zZm9ybWF0aW9uJyxhc19vZl9kdC5yZXBsYWNlKCdbJywnJykucmVwbGFjZSgnXScsJycpLnNwbGl0KCcsJykKICAgICNwcmludCAndHNzdGFtcCBhZnRlciB0cmFuc2Zvcm1hdGlvbnMnLHRzU3RtcC5yZXBsYWNlKCdbJywnJykucmVwbGFjZSgnXScsJycpLnNwbGl0KCcsJykKICAgIAogICAgZmxlVHNFeHN0PSIvJXMvJXMvZGF0ZXRpbWUvJXNfdmFsaWRhdGlvbiIlKGdfaGRwX2xvYyxqb2JOYW1lLGZsZV9ubV9TcGx0KQogICAgdHNFeHN0cmVzPXJtckhkZnMoZmxlVHNFeHN0KQogICAgZmxlaW5IZHA9Ii8lcy8lcy9pbmJvdW5kLyVzIiUoZ19oZHBfbG9jLGpvYk5hbWUsZmxlTm1lKQogICAgaW5IZHByZXM9cm1ySGRmcyhmbGVpbkhkcCkKICAgIGZsZVRvSGRwPSIlcyAvJXMvJXMvaW5ib3VuZC8iJShpbnAsZ19oZHBfbG9jLGpvYk5hbWUpCiAgICBwcmludCBmbGVUb0hkcAogICAgcHV0SGRmcyhmbGVUb0hkcCkKCiAgICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICAgICMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAogICAgICAgICAjLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAgICAgIAogICAgICAgICAjLyAgICAgICAgIFBpZyBzY3JpcHQtPjEgZmV0Y2ggdGhlIGFzX29mX2R0IGFuZCB2YWxpZCB0aW1lc3RhbXAgb24gdGhlIGZpbGUuICAgICAgICAvIwogICAgICAgICAjLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwogICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgCiAgICBwaWdSZWcgPSAicmVnaXN0ZXIgL2hvbWUvcGhkZnRwdXNlci8lcy9wcm9qZWN0L2ZyYW1ld29yay91ZGYvcGFyc2UucHkgdXNpbmcganl0aG9uIGFzIG15X3NwZWNpYWxfdWRmczsgXG4iICUoZ190ZXN0X3ZhcikKICAgIHBpZ0xpbmUxID0gIkEgPSBMT0FEICcvJXMvJXMvaW5ib3VuZC8lcyciJShnX2hkcF9sb2Msam9iTmFtZSxmbGVObWUpICsiQVMgKGxpbmU6Y2hhcmFycmF5KTtcbiIKICAgIHBpZ0xpbmUyID0gIkIgPSBGSUxURVIgQSBCWSBTVUJTVFJJTkcobGluZSwwLDMpPT0nJXMnO1xuIiUoaExuZSkKICAgIHBpZ0xpbmUzID0gIkMgPSBGT1JFQUNIIEIgR0VORVJBVEUgbXlfc3BlY2lhbF91ZGZzLmZldGNoQXNfb2ZfZHQobGluZSwnJXMnLCclcycpO1xuIiUoYXNfb2ZfZHQsdHNTdG1wKQogICAgcGlnTGluZTQgPSAiU1RPUkUgQyBJTlRPICcvJXMvJXMvZGF0ZXRpbWUvJXNfdmFsaWRhdGlvbic7IiAlIChnX2hkcF9sb2Msam9iTmFtZSxmbGVfbm1fU3BsdCkKICAgIAogICAgdG1TdG1wRmlsZSA9ICcvaG9tZS9waGRmdHB1c2VyLyVzL3Byb2plY3QvJXMvcGlnc2NyaXB0LyVzX2dldGRhdGUucGlnJyAlIChnX3Rlc3RfdmFyLGpvYk5hbWUsZmxlX25tX1NwbHQpCiAgICBwcmNGbGU9J3BpZyB0aW1lc3RhbXAgc2NyaXB0JwogICAgbW9kZT0ndycKICAgIHBpZ0pvYkZpbGUgPSBmbGVDaGVjayh0bVN0bXBGaWxlLHByY0ZsZSxtb2RlKQogICAgcGlnSm9iRmlsZS53cml0ZShwaWdSZWcrcGlnTGluZTErcGlnTGluZTIrcGlnTGluZTMrcGlnTGluZTQpICAgIAogICAgcGlnSm9iRmlsZS5jbG9zZSgpCiAgICBwaWdqb2I9ICJwaWcgJXMiICUgKHRtU3RtcEZpbGUpCiAgICBvcy5zeXN0ZW0ocGlnam9iKQogICAgaGFkb29wRnNKb2IgPSAiLyVzLyVzL2RhdGV0aW1lLyVzX3ZhbGlkYXRpb24vcGFydCoiICUgKGdfaGRwX2xvYyxqb2JOYW1lLGZsZV9ubV9TcGx0KQogICAgcnNsdFN0PWNhdEhkZnMoaGFkb29wRnNKb2IpCiAgICBwcmludCByc2x0U3Quc3BsaXQoJ3wnKQogICAgY3VyVFNUTXA9cnNsdFN0LnNwbGl0KCd8JylbMV0KICAgIHRzQ2hlY2s9dG1lU3RtcENoZWNrKGZsZVN6ZUNoayx0c091dHB1dCxjdXJUU1RNcCx0YWJsZSkKICAgIAoKICAgIGZsZVRibEV4c3Q9Ii8lcy8lcy8lcy50eHQiJSAoZ19oZHBfbG9jLGpvYk5hbWUsdGFibGUpCiAgICB0YmxFeHN0cmVzPXJtckhkZnMoZmxlVGJsRXhzdCkKICAgIGZsZUNudEV4c3Q9Ii8lcy8lcy9jb3VudC8lc19jb3VudCIlKGdfaGRwX2xvYyxqb2JOYW1lLHRhYmxlKQogICAgY250RXhzdHJlcz1ybXJIZGZzKGZsZUNudEV4c3QpCgogICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgICAjLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIyAKICAgICAgICAgIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgICAgICAKICAgICAgICAgIy8gIFBpZyBzY3JpcHQtPjIgUHJvY2VzcyB0aGUgaW5wdXQgbGluZXMgYW5kIHN0b3JlcyB0aGUgZm9ybWF0dGVkIGxpbmVzIGFuZCBjb3VudC4gLyMKICAgICAgICAgIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIAkKICAgIHBpZ3ByY1JlZyA9ICJyZWdpc3RlciAvaG9tZS9waGRmdHB1c2VyLyVzL3Byb2plY3QvZnJhbWV3b3JrL3VkZi9wYXJzZS5weSB1c2luZyBqeXRob24gYXMgbXlfc3BlY2lhbF91ZGZzOyBcbiIgJShnX3Rlc3RfdmFyKQogICAgcGlncHJjTGluZTEgPSAiQSA9IExPQUQgJy8lcy8lcy9pbmJvdW5kLyVzJyIlKGdfaGRwX2xvYyxqb2JOYW1lLGZsZU5tZSkgKyIgQVMgKGxpbmU6Y2hhcmFycmF5KTtcbiIKICAgIHBpZ3ByY0xpbmUyID0gIkIgPSBGSUxURVIgQSBCWSBTVUJTVFJJTkcobGluZSwwLDMpIT0nJXMnIEFORCBTVUJTVFJJTkcobGluZSwwLDMpIT0nJXMnO1xuIiUoaExuZSx0TG5lKQogICAgcGlncHJjTGluZTMgPSAiQyA9IEZPUkVBQ0ggQiBHRU5FUkFURSBteV9zcGVjaWFsX3VkZnMubG5lUHJvY2VzcyhsaW5lLCclcycsJyVzJywnJXMnLCclcycsJyVzJyk7XG4iJShtYXBMc3QscHJvY0lkLGxlbl9vZl9sbmUsaW5zcnRfdHMscnNsdFN0LnNwbGl0KCd8JylbMF0pCiAgICBwaWdwcmNMaW5lNCA9ICJTVE9SRSBDIElOVE8gJy8lcy8lcy8lcy50eHQnIFVTSU5HIFBpZ1N0b3JhZ2UoKTtcbiIgJSAoZ19oZHBfbG9jLGpvYk5hbWUsdGFibGUpCiAgICBwaWdwcmNMaW5lNSA9ICJEID0gRk9SRUFDSCAoR1JPVVAgQyBBTEwpIEdFTkVSQVRFIENPVU5UKEMpO1xuIgogICAgcGlncHJjTGluZTYgPSAiU1RPUkUgRCBJTlRPICcvJXMvJXMvY291bnQvJXNfY291bnQnIFVTSU5HIFBpZ1N0b3JhZ2UoKTtcbiIlKGdfaGRwX2xvYyxqb2JOYW1lLHRhYmxlKQogCiAgICAKICAgIHBpZ1NjcnBGaWxlID0gJy9ob21lL3BoZGZ0cHVzZXIvJXMvcHJvamVjdC8lcy9waWdzY3JpcHQvJXNfcHJjZmlsZS5waWcnICUgKGdfdGVzdF92YXIsam9iTmFtZSxmbGVfbm1fU3BsdCkKICAgIHByY0ZsZT0ncGlnIHByYXNpbmcgc2NyaXB0JwogICAgbW9kZT0ndycKICAgIHBpZ3ByY0ZpbGUgPSBmbGVDaGVjayhwaWdTY3JwRmlsZSxwcmNGbGUsbW9kZSkKICAgIHBpZ3ByY0ZpbGUud3JpdGUocGlncHJjUmVnK3BpZ3ByY0xpbmUxK3BpZ3ByY0xpbmUyK3BpZ3ByY0xpbmUzK3BpZ3ByY0xpbmU0K3BpZ3ByY0xpbmU1K3BpZ3ByY0xpbmU2KSAgICAKICAgIAogICAgICAgIAogICAgcGlncHJjRmlsZS5jbG9zZSgpCiAgICBwaWdwcmNqb2I9ICJwaWcgLU0gJXMiICUgKHBpZ1NjcnBGaWxlKQogICAgb3Muc3lzdGVtKHBpZ3ByY2pvYikKICAgIGZsZVRibEV4c3Q9Ii8lcy8lcy8lcy50eHQiJSAoZ19oZHBfbG9jLGpvYk5hbWUsdGFibGUpCiAgICBydHJuQ2Q9dGVzdEhkZnMoZmxlVGJsRXhzdCkKICAgIHByaW50IHJ0cm5DZAogICAgaWYgaW50KHJ0cm5DZCk9PTE6CiAgICAgICAgZm5sU3RyZz0nUGlnIFByb2Nlc3MgZmFpbGVkIHBsZWFzZSBjaGVjayB0aGUgcGlnIGxvZycKICAgICAgICBzZW5kRXJyb21haWwoZm5sU3RyZywnUGlnIFByb2Nlc3MgRmFpbGVkJywnJykKICAgICAgICBzeXMuZXhpdCgxKQogICAgaGFkb29wRnNjbnRKb2IgPSAiLyVzLyVzL2NvdW50LyVzX2NvdW50L3BhcnQqIiAlIChnX2hkcF9sb2Msam9iTmFtZSx0YWJsZSkKICAgIHJzbHRDbnQgPSBjYXRIZGZzKGhhZG9vcEZzY250Sm9iKQogICAgcHJpbnQgJ3Jlc3VsdCBjb3VudCBpcycscnNsdENudAogICAgcmV0dXJuIGludChyc2x0Q250KSxyc2x0U3Quc3BsaXQoJ3wnKVsxXQogICAKICAgCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jIAojLyAgICAgIHZhbGlkYXRlIDogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJldHdlZW4gdGhlIGNvdW50cyByZXR1cm5lZCBmcm9tIHRoZSBwcm9jZXNzIGFuZCBleHRlcm5hbCB0YWJsZSBhbmQgaW5zZXJ0cyAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgcm93cyBpbnRvIHRoZSBpbnRlcm5hbCB0YWJsZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgTm90ZTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgIFRoaXMgbWV0aG9kIGhhcyB0aGUgZmxhZyB0c190bF9GbGcgd2hpY2ggd2lsbCBzZXQgdG8gIlkiIHdoZW4gaXQgaXMgVEwgYW5kICJOIiB3aGVuIGl0IGlzIFRTIGJhc2Ugb24gdGhlICAgICAgICAgLyMKIy8gICAgICAgICAgIG9wZXJhdGlvbiB2YXJpYWJsZSBhbmQgd2lsbCBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIGhhd3EgZnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgUmV0dXJucyBOb3RoaW5nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKZGVmIHZhbGlkYXRlKGNvbm4sY3VyLHNjaGVtYSx0YWJsZW5hbWUsZkNvdW50LG9wZXJhdGlvbixmdW5jKToKICAgIGNudF9DaGs9J3NlbGVjdCBjb3VudCgqKSBmcm9tICVzLiVzX2V4dCclKHNjaGVtYSx0YWJsZW5hbWUpCiAgICBpZiBvcGVyYXRpb249PSdUUyc6CiAgICAJdHNfdGw9J3RzJwogICAgICAgIHRzX3RsX0ZsZz0nTicKICAgICAgICBpbnNydD0gInNlbGVjdCAlcygnJXMuJXNfZXh0JywnJXMuJXNfJXMnLCclcycpOyIlKGZ1bmMsc2NoZW1hLHRhYmxlbmFtZSxzY2hlbWEsdGFibGVuYW1lLHRzX3RsLHRzX3RsX0ZsZykKICAgIGVsc2U6CiAgICAgICAgdHNfdGxfRmxnPSdZJwogICAgICAgIGluc3J0PSAic2VsZWN0ICVzKCclcy4lc19leHQnLCclcy4lcycsJyVzJyk7IiUoZnVuYyxzY2hlbWEsdGFibGVuYW1lLHNjaGVtYSx0YWJsZW5hbWUsdHNfdGxfRmxnKQogICAgdHJ5OgogICAgICAgIHByaW50IGluc3J0IAogICAgICAgIHByaW50IGNudF9DaGsKICAgICAgICBjdXIuZXhlY3V0ZShjbnRfQ2hrKQogICAgICAgIGV4dF9DbnQ9Y3VyLmZldGNob25lKClbMF0KICAgICAgICBwcmludCBleHRfQ250CiAgICAgICAgcHJpbnQgdHlwZShmQ291bnQpLHR5cGUoZXh0X0NudCkKICAgICAgICBpZiBleHRfQ250PT1mQ291bnQ6CgkgICBjdXIuZXhlY3V0ZShpbnNydCkKICAgICAgICAgICByZXN1bHRTZXQ9Y3VyLmZldGNob25lKCkKICAgICAgICAgICBjb25uLmNvbW1pdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICBwcmludCAnY291bnRzIGRvZXNudCBtYXRjaCBwbGVhc2UgY2hlY2sgdGhlIGxvZyB0YWJsZXMnCiAgICAgICAgICAgZXJyTXNnPSJUaGUgQ291bnRzIGJldHdlZW4gdGhlIHByb2dyYW0gY291bnRlciAtICVzIGFuZCBleHRlcm5hbCB0YWJsZSAtICVzIGNvdW50IGRvZXNudCBtYXRjaCIgJShzdHIoZkNvdW50KSxzdHIoZXh0X0NudCkpCgkgICBkZU1zZz0iUGxlYXNlIGNoZWNrIHRoZSBsb2dzLiVzIHRhYmxlIGZvciBtb3JlIGluZm8iJSh0YWJsZW5hbWUpICAKCSAgIGZubFN0cmc9ZXJyTXNnKydcbicrZGVNc2cKCSAgIHNlbmRFcnJvbWFpbChmbmxTdHJnLCdDb3VudHMgRG9lc250IG1hdGNoJyx0YWJsZW5hbWUpCiAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICBwcmludCAncmVzdWx0U2V0IGlzICcscmVzdWx0U2V0CiAgICAgICAgcHJpbnQgJ2luc2VydCBjb21wbGV0ZScKICAgIGV4Y2VwdCBwc3ljb3BnMi5FcnJvciwgZToKICAgICAgICBwcmludCAnRXJyb3IgJXMnJSBlCiAgICAgICAgZXJyTXNnPSdFcnJvcjogRGF0YWJhc2Ugb3BlcmF0aW9uYWwgaXNzdWUnCiAgICAgICAgZGVNc2c9J0RFQlVHOlBsZWFzZSBjaGVjayB0aGUgcXVlcnkgeW91IHByb3ZpZGVkICVzJyUoZSkKICAgICAgICBmbmxTdHJnPWVyck1zZysnXG4nK2RlTXNnCiAgICAgICAgc2VuZEVycm9tYWlsKGZubFN0cmcsJ0RhdGFiYXNlIE9wZXJhdGlvbmFsIGlzc3VlJywnJykKICAgICAgICBzeXMuZXhpdCgxKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgbWFpbiA6IFRoaXMgaXMgdGhlIHN0YXJ0IG9mIHRoZSBzY3JpcHQgd2hlcmUgYWxsIHRoZSBhcmd1bWVudHMgYXJlIHJlYWQgYW5kIHBhc3NlZCB0byBlYWNoIG9mIHRoZSBtZXRob2RzICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICBwcm9jZXNzIGFuZCB2YWxpZGF0ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMKIy8gICAgICBOb3RlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8jCiMvICAgICAgICAgICAgVGhpcyBtZXRob2RlIGhhcyB0aGUgImZsZV9SbXZsX0ZsZyIgZmxhZyB3aGljaCB3aWxsIHRlbGwgdGhlIHNjcmlwdCB0byBub3QgdG8gcmVtb3ZlIHRoZSBpbnB1dCBmaWxlIGFzIGl0IGhhcyAvIwojLyAgICAgICAgICAgICAgIG11bGl0cGxlIGxheW91dHMgdG8gYmUgcHJvY2Vzc2VkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgCiMvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIwojLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgoKCmRlZiBtYWluKGFyZ3VtZW50cyk6CiAgICBwcmludCBhcmd1bWVudHMKICAgIHNyY1BycD1hcmd1bWVudHNbMF0KICAgIGlucHV0X2ZpbGU9YXJndW1lbnRzWzFdCiAgICB0cm5TZnJtPWludChhcmd1bWVudHNbMl0pCiAgICBpbnVfRmxubWU9aW5wdXRfZmlsZS5zcGxpdCgnLycpWy0xXQogICAgaWYgJ18nIGluIGlucHV0X2ZpbGUuc3BsaXQoJy8nKVstMV06CglmbGVfbm1fU3BsdD1pbnB1dF9maWxlLnNwbGl0KCcvJylbLTFdLnNwbGl0KCdfJylbMF0KICAgIGVsc2U6CiAgICAgICAgZmxlX25tX1NwbHQ9aW5wdXRfZmlsZS5zcGxpdCgnLycpWy0xXS5zcGxpdCgnLmRhdCcpWzBdICAKICAgIHByaW50IGZsZV9ubV9TcGx0CiAgICBvdXRQYXRoPWlucHV0X2ZpbGUuc3BsaXQoJy8nKQogICAgcHJpbnQgc3RyKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKQogICAgZmxlU3plQ2hrPUZhbHNlCiAgICByZVJ1bj0wCiAgICBleGVjTHN0PVtdCiAgICBjb25uTHN0PVtdCiAgICBpZiBsZW4oYXJndW1lbnRzKT4zOgogICAgICAgIGlmIGFyZ3VtZW50c1szXS5zcGxpdCgnIycpWzBdPT0ncmVydW4nOgogICAgICAgICAgICByZVJ1bj1pbnQoYXJndW1lbnRzWzNdLnNwbGl0KCcjJylbLTFdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbm5Mc3Q9W2ludCh4KSBmb3IgeCBpbiBhcmd1bWVudHNbM10uc3BsaXQoJyMnKVstMV0uc3BsaXQoJywnKV0KICAgIHByaW50IHJlUnVuLGNvbm5Mc3QKICAgIGZsZVB0aD0nLycuam9pbihzcmNQcnAuc3BsaXQoJy8nKVswOi0yXSkrJy9qc29uLycKICAgIHByaW50ICdhYnNvbHV0ZSBmaWxlIHBhdGgnLGZsZVB0aAogICMgSnNvbiBwb2ludGVyIFByb3BlcnR5IGZpbGUgY2hlY2sKICAgIHByY0ZsZT0ncG9pbnRlciB0byBKc29uIHByb3BlcnR5IGZpbGUnCiAgICBtb2RlPSdyJwogICAganNvblNyY1BudHI9IGZsZUNoZWNrKHNyY1BycCxwcmNGbGUsbW9kZSkKICAgICAgICAKICAgIGZvciBwcnAgaW4ganNvblNyY1BudHI6CiAgICAgICAgZmxlUG50ZXI9cHJwLnNwbGl0KCd8JylbMV0uc3RyaXAoKQogICAgICAgIGlmIHBycC5zcGxpdCgnfCcpWzBdIT0nU1InOgoJICAgIHNyTm89aW50KHBycC5zcGxpdCgnfCcpWzBdLnN0cmlwKCkpCiAgICAgICAgICAgIGlmIHJlUnVuIT0wOgogICAgICAgICAgICAgICAgaWYgc3JObz49cmVSdW46CiAgICAgICAgICAgICAgICAgICBleGVjTHN0LmFwcGVuZChmbGVQbnRlcikKICAgICAgICAgICAgZWxpZiBsZW4oY29ubkxzdCkhPTA6CiAgICAgICAgICAgICAgICBpZiBzck5vIGluIGNvbm5Mc3Q6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ2NhbWUgaGVyZScKICAgICAgICAgICAgICAgICAgICBleGVjTHN0LmFwcGVuZChmbGVQbnRlcikKICAgICAgICAgICAgZWxzZToJCQogICAgICAgICAgICAgICAgZXhlY0xzdC5hcHBlbmQoZmxlUG50ZXIpCiAgICBwcmludCBleGVjTHN0CiAgICBnX2dwX2hvc3QsZ19ncF9kYixnX2hkcF9sb2MsbndfRHJpdmU9Z2V0Q29ubigpCiAgICB0cnk6CiAgICAgICAgICAgIGNvbm4gPSBwc3ljb3BnMi5jb25uZWN0KCJob3N0YWRkcj0lcyBkYm5hbWU9JXMiICUgKGdfZ3BfaG9zdCxnX2dwX2RiKSkKICAgICAgICAgICAgI2Nvbm4uYXV0b2NvbW1pdCA9IFRydWUKICAgICAgICAgICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgZXhjZXB0ICBwc3ljb3BnMi5FcnJvciwgZToKICAgICAgICAgICAgcHJpbnQgJ1VuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZSAlcyclIGUKICAgICAgICAgICAgZXJyTXNnPSdFcnJvcjogRGF0YWJhc2UgY29ubmVjaXRpdml0eSBpc3N1ZXMgLSVzJyAlIGUKICAgICAgICAgICAgZGVNc2c9J0RFQlVHOlBsZWFzZSBjaGVjayB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbnMnCiAgICAgICAgICAgIGZubFN0cmc9ZXJyTXNnKydcbicrZGVNc2cKICAgICAgICAgICAgc2VuZEVycm9tYWlsKGZubFN0cmcsJ0lzc3VlIGluIERhdGFiYXNlIENvbm5lY3Rpb24gU3RyaW5nJywnJykKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgIGlmIHRyblNmcm09PTA6CiAgICAgICAgICNJbnB1dCBmaWxlIENoZWNrCiAgICAgICAgIHByY0ZsZT0naW5wdXQgZmlsZSBvbiBud19kcml2ZScKICAgICAgICAgbW9kZT0ncicKICAgICAgICAgaW5wPWZsZUNoZWNrKGlucHV0X2ZpbGUscHJjRmxlLG1vZGUpCiAgICAKICAgIGZvciBmbGUgaW4gZXhlY0xzdDoKICAgICAgICBsYXlvdXQ9ZmxlUHRoK2ZsZQogICAgICAgIHByaW50IGxheW91dAogICAgI0pzb24gbGF5b3V0IGNoZWNrIAogICAgICAgIHByY0ZsZT0nSnNvbiBMYXlvdXQgZmlsZScKICAgICAgICBtb2RlPSdyJwogICAgICAgIGxheW91dF9GaWxlPWZsZUNoZWNrKGxheW91dCxwcmNGbGUsbW9kZSkKICAgICAgICBqc29uX2xvYWQgPSBqc29uLmxvYWQobGF5b3V0X0ZpbGUpICAgICAgICAgICAgICAgCiAgICAgICAgc2NoZW1hPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJzY2hlbWEiXQogICAgICAgIHRhYmxlPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJ0YWJsZSJdCiAgICAgICAgb3BlcmF0aW9uPWpzb25fbG9hZFsiZGJfcHJvcCJdWzBdWyJvcGVyYXRpb24iXQogICAgICAgIGZ1bmM9Z19mdW5jX3ZhcgogICAgICAgIGlmICJtdWxfZmxlX0ZsZyIgaW4ganNvbl9sb2FkWyJkYl9wcm9wIl1bMF0ua2V5cygpOgogICAgICAgICAgICBmbGVfbm1fU3BsdD10YWJsZQogICAgICAgIGNudCx0bVN0bXA9MCwnJwogICAgICAgIG0sc3RydCxzdHA9MCwwLDAKICAgICAgICBmbGVQYXRoPVtdCiAgICAgICAgd2hpbGUgbTwobGVuKG91dFBhdGgpLTEpOgogICAgICAgICAgICBpZiBvdXRQYXRoW21dPT0nJXMnICVud19Ecml2ZToKICAgICAgICAgICAgICAgIHN0cnQ9bQogICAgICAgICAgICBpZiBvdXRQYXRoW21dPT0naW5ib3VuZCc6CiAgICAgICAgICAgICAgICBzdHA9bQogICAgICAgICAgICBtKz0xCiAgICAgICAgZm9yIG4gaW4gcmFuZ2Uoc3RydCsxLHN0cCk6CiAgICAgICAgICAgIGZsZVBhdGguYXBwZW5kKG91dFBhdGhbbl0pCgogICAgICAgIHByb2dKb2JQYXRoPScvJy5qb2luKGZsZVBhdGgpCiAgICAgICAgam9iRmlsZU5hbWUgPW91dFBhdGhbbGVuKG91dFBhdGgpLTFdLnNwbGl0KCcuJykKICAgICAgICBqb2JOYW1lID0gcHJvZ0pvYlBhdGguc3BsaXQoJy8nKVstMV0ubG93ZXIoKQogICAgICAgIHByaW50IHByb2dKb2JQYXRoLGpvYk5hbWUKICAgICAgICAKICAgICAgICB0c1ZhbGlkPScvaG9tZS9waGRmdHB1c2VyLyVzLyVzL2xvZ3MvJXNfdHN0bXAudHh0JyUoZ190ZXN0X3Zhcixqb2JOYW1lLGZsZV9ubV9TcGx0KQogICAgICAgIHByY0ZsZT0ndGltZXN0YW1wIGxvZyBmaWxlJwogICAgICAgIG1vZGU9J2ErJwogICAgICAgIHRzT3V0cHV0PWZsZUNoZWNrKHRzVmFsaWQscHJjRmxlLG1vZGUpCiAgICAgICAgaWYgb3MucGF0aC5nZXRzaXplKHRzVmFsaWQpPT0wOgogICAgICAgICAgICBwcmludCAnR2V0cyBoZXJlJwogICAgICAgICAgICBmbGVTemVDaGs9VHJ1ZQogICAgICAgICAgICAgIAogICAgICAgIGlmIHRyblNmcm09PTA6CiAgICAgICAgICMgb3V0cHV0IGZpbGUgbG9jYXRpb24gb24gbndfZHJpdmUgbG9jYXRpb24gY2hlY2sKICAgICAgICAgICAgZk91dHB1dD0nLyVzLyVzL3dpcC8lcy50eHQnJShud19Ecml2ZSxwcm9nSm9iUGF0aCx0YWJsZSkKICAgICAgICAgICAgcHJjRmxlPSdPdXRwdXQgZmlsZSBvbiBud19kcml2ZScKICAgICAgICAgICAgbW9kZT0ndycKICAgICAgICAgICAgb3V0cHV0PWZsZUNoZWNrKGZPdXRwdXQscHJjRmxlLG1vZGUpCiAgICAgICAgICAgIGNudCx0bVN0bXAgPSBwcm9jZXNzKGpzb25fbG9hZCxpbnAsb3V0cHV0LHRzT3V0cHV0LGZsZVN6ZUNoayx0YWJsZSkKICAgICAgICAgICAgb3V0cHV0LmNsb3NlKCkKICAgICAgICAgICAgcHJpbnQgY250CiAgICAgICAgICAgIG1vdmVUb0hERlMocHJvZ0pvYlBhdGgsam9iTmFtZSx0YWJsZSxnX2hkcF9sb2MsbndfRHJpdmUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY250LHRtU3RtcD1waWdwcm9jZXNzKGpzb25fbG9hZCxpbnB1dF9maWxlLGpvYk5hbWUsaW51X0Zsbm1lLGZsZV9ubV9TcGx0LGZsZVN6ZUNoayx0c091dHB1dCx0YWJsZSxnX2hkcF9sb2MpCiAgICAgICAgCiAgICAgICAgdmFsaWRhdGUoY29ubixjdXIsc2NoZW1hLHRhYmxlLGNudCxvcGVyYXRpb24sZnVuYykKICAgICAgICB0c091dHB1dC53cml0ZSh0bVN0bXArJ1xuJykKICAgICAgICB0c091dHB1dC5jbG9zZSgpCiAgICAgICAgaWYgdHJuU2ZybT09MDoKICAgICAgICAgICBpbnAuc2VlaygwKQogICAgb3MucmVtb3ZlKGlucHV0X2ZpbGUpCiAgICBwcmludCAnZmlsZSByZW1vdmVkIHN1Y2Nlc3NmdWxseScKICAgIGNvbm4uY29tbWl0KCkKICAgIGN1ci5jbG9zZSgpCiAgICBjb25uLmNsb3NlKCkKICAgIGlmIHRyblNmcm09PTA6CiAgICAgICBpbnAuY2xvc2UoKQogICAgcHJpbnQgJ2NvbXBsZXRlZCcKICAgIHByaW50IHN0cihkYXRldGltZS5kYXRldGltZS5ub3coKSkKCgppZiBfX25hbWVfXz09Il9fbWFpbl9fIjoKICAgIGlmIGxlbihzeXMuYXJndikgaW4gKDIsMyw0LDUpOgogICAgICAgIG1haW4oc3lzLmFyZ3ZbMTpdKQogICAgICAgICAKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgIk5lZWRzIGFuIGxheW91dCwgaW5wdXQgZmlsZSBhcmd1bWVudCBhbmQgZmxpcCBjb2RlIGVpdGhlcjAgZm9yIG11dGxpcGxlIHJlY29yZCB0eXBlIGZpbGVzIGFuZCB1c2UgMSBmb3IgaW5wdXQgZmlsZSB3aXRoIHNpbmdsZSByZWNvcmR0eXBlIGFuZCBtb3JlIHRoYW4gYSBnaWdhYnl0ZSBmb3IgdGhlIHByb2dyYW0gdG8gcHJvY2VlZCBhbmQgb3B0aW9uYWwgcmVydW4gYW5kIGxpc3QgYXJndW1lbnQgd2hlbiBwcm9ncmFtIGV4aXRlZCBhYm5vcm1hbGx5IgogICAgICAgIGVyck1zZz0nRXJyb3I6IEFydWdtZW50cyBlcnJvcicKICAgICAgICBkZU1zZz0nREVCVUc6TmVlZHMgYW4gbGF5b3V0LCBpbnB1dCBmaWxlIGFyZ3VtZW50IGZvciB0aGUgcHJvZ3JhbSB0byBwcm9jZWVkJwogICAgICAgIGZubFN0cmc9ZXJyTXNnKydcbicrZGVNc2cKICAgICAgICBzZW5kRXJyb21haWwoZm5sU3RyZywnSW50aWFsIEFydWd1bWVudCBFcnJvcicsJycpCiAgICAgICAgc3lzLmV4aXQoMSk=</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="-" type="4">
        <text>created inital version to move it to tags Kasyap/Kamal</text>
      </register>
    </registers>
    <search>
      <last-dir>0</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search />
      <history-cmd />
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>